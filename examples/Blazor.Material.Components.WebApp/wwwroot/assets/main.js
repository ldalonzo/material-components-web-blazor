!function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=2)}([,function(e,t,n){"use strict";(function(e){n.d(t,"p",(function(){return i})),n.d(t,"n",(function(){return r})),n.d(t,"o",(function(){return o})),n.d(t,"m",(function(){return a})),n.d(t,"b",(function(){return s})),n.d(t,"c",(function(){return c})),n.d(t,"l",(function(){return u})),n.d(t,"i",(function(){return l})),n.d(t,"j",(function(){return p})),n.d(t,"a",(function(){return f})),n.d(t,"g",(function(){return d})),n.d(t,"d",(function(){return h})),n.d(t,"f",(function(){return g})),n.d(t,"h",(function(){return m})),n.d(t,"k",(function(){return v})),n.d(t,"e",(function(){return y}));var i="undefined",r="object",o="prototype",a="function";function s(){return typeof globalThis!==i&&globalThis?globalThis:typeof self!==i&&self?self:typeof window!==i&&window?window:typeof e!==i&&e?e:null}function c(e){var t=s();return t&&t[e]?t[e]:"window"===e&&u()?window:null}function u(){return Boolean(typeof window===r&&window)}function l(){return u()?window:c("window")}function p(){return Boolean(typeof document===r&&document)}function f(){return p()?document:c("document")}function d(){return Boolean(typeof navigator===r&&navigator)?navigator:c("navigator")}function h(){return Boolean(typeof history===r&&history)?history:c("history")}function g(){return typeof location===r&&location?location:c("location")}function m(){return c("performance")}function v(){return Boolean(typeof JSON===r&&JSON||null!==c("JSON"))}function y(){return v()?JSON||c("JSON"):null}}).call(this,n(3))},function(e,t,n){e.exports=n(4)},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";n.r(t);var i={};n.r(i),n.d(i,"Util",(function(){return lt})),n.d(i,"CorrelationIdHelper",(function(){return ft})),n.d(i,"UrlHelper",(function(){return pt})),n.d(i,"DateTimeUtils",(function(){return ht})),n.d(i,"ConnectionStringParser",(function(){return It})),n.d(i,"FieldType",(function(){return Ye})),n.d(i,"RequestHeaders",(function(){return rt})),n.d(i,"DisabledPropertyName",(function(){return gt})),n.d(i,"ProcessLegacy",(function(){return vt})),n.d(i,"SampleRate",(function(){return mt})),n.d(i,"HttpMethod",(function(){return yt})),n.d(i,"DEFAULT_BREEZE_ENDPOINT",(function(){return xt})),n.d(i,"AIData",(function(){return bt})),n.d(i,"AIBase",(function(){return _t})),n.d(i,"Envelope",(function(){return Tt})),n.d(i,"Event",(function(){return wt})),n.d(i,"Exception",(function(){return Nt})),n.d(i,"Metric",(function(){return Mt})),n.d(i,"PageView",(function(){return Ot})),n.d(i,"PageViewData",(function(){return Ut})),n.d(i,"RemoteDependencyData",(function(){return jt})),n.d(i,"Trace",(function(){return qt})),n.d(i,"PageViewPerformance",(function(){return Ft})),n.d(i,"Data",(function(){return zt})),n.d(i,"SeverityLevel",(function(){return Lt})),n.d(i,"ConfigurationManager",(function(){return Ht})),n.d(i,"ContextTagKeys",(function(){return Vt})),n.d(i,"DataSanitizer",(function(){return ot})),n.d(i,"TelemetryItemCreator",(function(){return Bt})),n.d(i,"CtxTagKeys",(function(){return Wt})),n.d(i,"Extensions",(function(){return Gt})),n.d(i,"DistributedTracingModes",(function(){return Je})),n.d(i,"PropertiesPluginIdentifier",(function(){return Kt})),n.d(i,"BreezeChannelIdentifier",(function(){return Xt})),n.d(i,"AnalyticsPluginIdentifier",(function(){return Yt}));n.p;
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function o(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var a=function(){return(a=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};var s=n(1);s.p;function c(e,t){return typeof e===t}function u(e){return c(e,s.p)||void 0===e}function l(e){return u(e)||null===e}function p(e,t){return e&&Object[s.o].hasOwnProperty.call(e,t)}function f(e){return c(e,s.n)}function d(e){return c(e,s.m)}function h(e,t,n,i){void 0===i&&(i=!1);var r=!1;if(!l(e))try{l(e.addEventListener)?l(e.attachEvent)||(e.attachEvent("on"+t,n),r=!0):(e.addEventListener(t,n,i),r=!0)}catch(e){}return r}function g(e,t,n,i){if(void 0===i&&(i=!1),!l(e))try{l(e.removeEventListener)?l(e.detachEvent)||e.detachEvent("on"+t,n):e.removeEventListener(t,n,i)}catch(e){}}var m,v=function(){function e(){}return e.isDate=function(e){return"[object Date]"===Object[s.o].toString.call(e)},e.isString=function(e){return c(e,"string")},e.isNumber=function(e){return c(e,"number")},e.isBoolean=function(e){return c(e,"boolean")},e.disableCookies=function(){e._canUseCookies=!1},e.newGuid=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(y,(function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}))},e.toISOString=function(t){if(e.isDate(t)){var n=function(e){var t=String(e);return 1===t.length&&(t="0"+t),t};return t.getUTCFullYear()+"-"+n(t.getUTCMonth()+1)+"-"+n(t.getUTCDate())+"T"+n(t.getUTCHours())+":"+n(t.getUTCMinutes())+":"+n(t.getUTCSeconds())+"."+String((t.getUTCMilliseconds()/1e3).toFixed(3)).slice(2,5)+"Z"}},e.arrForEach=function(e,t,n){for(var i=e.length,r=0;r<i;++r)r in e&&t.call(n||e,e[r],r,e)},e.arrIndexOf=function(e,t,n){for(var i=e.length,r=n||0,o=Math.max(r>=0?r:i-Math.abs(r),0);o<i;o++)if(o in e&&e[o]===t)return o;return-1},e.arrMap=function(e,t,n){for(var i=e.length,r=n||e,o=new Array(i),a=0;a<i;a++)a in e&&(o[a]=t.call(r,e[a],e));return o},e.arrReduce=function(e,t,n){var i,r=e.length,o=0;if(arguments.length>=3)i=arguments[2];else{for(;o<r&&!(o in e);)o++;i=e[o++]}for(;o<r;)o in e&&(i=t(i,e[o],o,e)),o++;return i},e.objCreate=function(e){if(null==e)return{};if(!f(e)&&!d(e))throw new TypeError("Object prototype may only be an Object: "+e);function t(){}return t[s.o]=e,new t},e.objKeys=function(e){var t=!{toString:null}.propertyIsEnumerable("toString");if(!(d(e)||f(e)&&null!==e))throw new TypeError("objKeys called on non-object");var n=[];for(var i in e)p(e,i)&&n.push(i);if(t)for(var r=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],o=r.length,a=0;a<o;a++)p(e,r[a])&&n.push(r[a]);return n},e.objDefineAccessors=function(e,t,n,i){var r=Object.defineProperty;if(r)try{var o={enumerable:!0,configurable:!0};return n&&(o.get=n),i&&(o.set=i),r(e,t,o),!0}catch(e){}return!1},e.addEventHandler=function(e,t){var n=!1,i=Object(s.i)();i&&(n=h(i,e,t),n=h(i.body,e,t)||n);var r=Object(s.a)();return r&&(n=x.Attach(r,e,t)||n),n},e.isTypeof=c,e.isUndefined=u,e.isNullOrUndefined=l,e.hasOwnProperty=p,e.isFunction=d,e.isObject=f,e}(),y=/[xy]/g,x=function(){function e(){}return e.Attach=h,e.AttachEvent=h,e.Detach=g,e.DetachEvent=g,e}();!function(e){e[e.CRITICAL=1]="CRITICAL",e[e.WARNING=2]="WARNING"}(m||(m={}));var I=0,_=1,b=2,T=3,S=4,C=5,w=6,E=7,D=8,N=9,A=10,k=11,R=12,L=13,P=14,M=15,U=16,O=17,j=18,q=19,F=20,z=22,H=23,V=24,B=25,G=26,W=27,K=28,X=29,Y=30,J=31,Q=32,Z=33,$=35,ee=36,te=37,ne=38,ie=39,re=40,oe=41,ae=42,se=43,ce=45,ue=46,le=47,pe=48,fe=49,de=50,he=52,ge=54,me=55,ve=56,ye=57,xe=58,Ie=60,_e=61,be=62,Te=63,Se=64,Ce=66,we=67,Ee=68,De=69,Ne=70,Ae=71,ke=72,Re=73,Le=function(){function e(t,n,i,r){void 0===i&&(i=!1),this.messageId=t,this.message=(i?e.AiUserActionablePrefix:e.AiNonUserActionablePrefix)+t;var o="";Object(s.k)()&&(o=Object(s.e)().stringify(r));var a=(n?" message:"+e.sanitizeDiagnosticText(n):"")+(r?" props:"+e.sanitizeDiagnosticText(o):"");this.message+=a}return e.sanitizeDiagnosticText=function(e){return e?'"'+e.replace(/\"/g,"")+'"':""},e.dataType="MessageData",e.AiNonUserActionablePrefix="AI (Internal): ",e.AiUserActionablePrefix="AI: ",e}(),Pe=function(){function e(e){this.queue=[],this.AIInternalMessagePrefix="AITR_",this._messageCount=0,this._messageLogged={},this.enableDebugExceptions=function(){return!1},this.consoleLoggingLevel=function(){return 0},this.telemetryLoggingLevel=function(){return 1},this.maxInternalMessageLimit=function(){return 25},v.isNullOrUndefined(e)||(v.isNullOrUndefined(e.loggingLevelConsole)||(this.consoleLoggingLevel=function(){return e.loggingLevelConsole}),v.isNullOrUndefined(e.loggingLevelTelemetry)||(this.telemetryLoggingLevel=function(){return e.loggingLevelTelemetry}),v.isNullOrUndefined(e.maxMessageLimit)||(this.maxInternalMessageLimit=function(){return e.maxMessageLimit}),v.isNullOrUndefined(e.enableDebugExceptions)||(this.enableDebugExceptions=function(){return e.enableDebugExceptions}))}return e.prototype.throwInternal=function(e,t,n,i,r){void 0===r&&(r=!1);var o=new Le(t,n,r,i);if(this.enableDebugExceptions())throw o;if(!v.isUndefined(o)&&o&&!v.isUndefined(o.message)){if(r){var a=+o.messageId;!this._messageLogged[a]&&this.consoleLoggingLevel()>=m.WARNING&&(this.warnToConsole(o.message),this._messageLogged[a]=!0)}else this.consoleLoggingLevel()>=m.WARNING&&this.warnToConsole(o.message);this.logInternalMessage(e,o)}},e.prototype.warnToConsole=function(e){!v.isUndefined(console)&&console&&(v.isFunction(console.warn)?console.warn(e):v.isFunction(console.log)&&console.log(e))},e.prototype.resetInternalMessageCount=function(){this._messageCount=0,this._messageLogged={}},e.prototype.logInternalMessage=function(e,t){if(!this._areInternalMessagesThrottled()){var n=!0,i=this.AIInternalMessagePrefix+t.messageId;if(this._messageLogged[i]?n=!1:this._messageLogged[i]=!0,n&&(e<=this.telemetryLoggingLevel()&&(this.queue.push(t),this._messageCount++),this._messageCount===this.maxInternalMessageLimit())){var r="Internal events throttle limit per PageView reached for this app.",o=new Le(H,r,!1);this.queue.push(o),this.warnToConsole(r)}}},e.prototype._areInternalMessagesThrottled=function(){return this._messageCount>=this.maxInternalMessageLimit()},e}(),Me=v.isFunction,Ue=function(e,t){var n=this,i=null,r=Me(e.processTelemetry),o=Me(e.setNextPlugin);n._hasRun=!1,n.getPlugin=function(){return e},n.getNext=function(){return i},n.setNext=function(e){i=e},n.processTelemetry=function(a,s){if(s||(s=t),e&&r){n._hasRun=!0;try{s.setNext(i),o&&e.setNextPlugin(i),i&&(i._hasRun=!1),e.processTelemetry(a,s)}catch(t){var c=i&&i._hasRun;i&&c||s.diagLog().throwInternal(m.CRITICAL,Re,"Plugin ["+e.identifier+"] failed during processTelemetry - "+t),i&&!c&&i.processTelemetry(a,s)}}else i&&(n._hasRun=!0,i.processTelemetry(a,s))}},Oe=v.isNullOrUndefined;function je(e,t){var n=[];if(e&&e.length>0)for(var i=null,r=0;r<e.length;r++){var o=e[r];if(o&&v.isFunction(o.processTelemetry)){var a=new Ue(o,t);n.push(a),i&&i.setNext(a),i=a}}return n.length>0?n[0]:null}var qe=function e(t,n,i,r){var o=this,a=null;null!==r&&(t&&v.isFunction(t.getPlugin)?a=function(e,t,n){var i=[],r=!n;if(e)for(;e;){var o=e.getPlugin();(r||o===n)&&(r=!0,i.push(o)),e=e.getNext()}return r||i.push(n),je(i,t)}(t,o,r||t.getPlugin()):r?a=function(e,t,n){var i=e,r=!1;return n&&e&&(i=[],v.arrForEach(e,(function(e){(r||e===n)&&(r=!0,i.push(e))}))),n&&!r&&(i||(i=[]),i.push(n)),je(i,t)}(t,o,r):v.isUndefined(r)&&(a=je(t,o))),o.core=function(){return i},o.diagLog=function(){var e=(i||{}).logger;return e||(e=new Pe(n||{})),e},o.getCfg=function(){return n},o.getExtCfg=function(e,t){var i;if(void 0===t&&(t={}),n){var r=n.extensionConfig;r&&e&&(i=r[e])}return i||t},o.getConfig=function(e,t,i){var r;void 0===i&&(i=!1);var a=o.getExtCfg(e,null);return a&&!Oe(a[t])?r=a[t]:n&&!Oe(n[t])&&(r=n[t]),Oe(r)?i:r},o.hasNext=function(){return null!=a},o.getNext=function(){return a},o.setNext=function(e){a=e},o.processNext=function(e){var t=a;t&&(a=t.getNext(),t.processTelemetry(e,o))},o.createNew=function(t,r){return void 0===t&&(t=null),new e(t||a,n,i,r)}},Fe=v.isFunction,ze=function(){function e(){var e=this,t=!1,n=null,i=null;e.core=null,e.diagLog=function(t){return e._getTelCtx(t).diagLog()},e.isInitialized=function(){return t},e.setInitialized=function(e){t=e},e.setNextPlugin=function(e){i=e},e.processNext=function(e,t){t?t.processNext(e):i&&Fe(i.processTelemetry)&&i.processTelemetry(e,null)},e._getTelCtx=function(t){void 0===t&&(t=null);var r=t;if(!r){var o=n||new qe(null,{},e.core);r=i&&i.getPlugin?o.createNew(null,i.getPlugin):o.createNew(null,i)}return r},e._baseTelInit=function(r,o,a,s){r&&(r.extensionConfig=r.extensionConfig||[]),!s&&o&&(s=o.getProcessTelContext().getNext());var c=i;i&&i.getPlugin&&(c=i.getPlugin()),e.core=o,n=new qe(s,r,o,c),t=!0}}return e.prototype.initialize=function(e,t,n,i){this._baseTelInit(e,t,n,i)},e}(),He=v.isFunction;function Ve(e,t){for(var n=[],i=null,r=e.getNext();r;){var o=r.getPlugin();o&&(i&&He(i.setNextPlugin)&&He(o.processTelemetry)&&i.setNextPlugin(o),He(o.isInitialized)&&o.isInitialized()||n.push(o),i=o,r=r.getNext())}v.arrForEach(n,(function(n){n.initialize(e.getCfg(),e.core(),t,e.getNext())}))}function Be(e){return e.sort((function(e,t){var n=0,i=He(t.processTelemetry);return He(e.processTelemetry)?n=i?e.priority-t.priority:1:i&&(n=-1),n}))}var Ge=v.arrForEach,We=v.objDefineAccessors;function Ke(e,t){t&&t.length>0&&(function(e){Ge(e,(function(e){if(e.priority<500)throw Error("Channel has invalid priority"+e.identifier)}))}(t=t.sort((function(e,t){return e.priority-t.priority}))),e.push(t))}var Xe,Ye,Je,Qe=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.identifier="ChannelControllerPlugin",t.priority=500,t}return o(t,e),t.prototype.processTelemetry=function(e,t){var n=this;this._channelQueue&&Ge(this._channelQueue,(function(i){i.length>0&&n._getTelCtx(t).createNew(i).processNext(e)}))},t.prototype.getChannelControls=function(){return this._channelQueue},t.prototype.initialize=function(t,n,i){if(!this.isInitialized()){e.prototype.initialize.call(this,t,n,i),t.isCookieUseDisabled&&v.disableCookies();var r=this._channelQueue=function(e,t){var n=[];if(e&&Ge(e,(function(e){return Ke(n,e)})),t){var i=[];Ge(t,(function(e){e.priority>500&&i.push(e)})),Ke(n,i)}return n}((t||{}).channels,i);Ge(r,(function(e){return Ve(new qe(e,t,n),i)}))}},t._staticInit=(We(t.prototype,"ChannelControls",t.prototype.getChannelControls),void We(t.prototype,"channelQueue",t.prototype.getChannelControls)),t}(ze),Ze=v.arrForEach,$e=v.isNullOrUndefined,et=function(){function e(){var e=!1;this._extensions=new Array,this._channelController=new Qe,this.isInitialized=function(){return e},this._setInit=function(t){e=t},this._eventQueue=[]}return e.prototype.initialize=function(e,t,n,i){if(this.isInitialized())throw Error("Core should not be initialized more than once");if(!e||$e(e.instrumentationKey))throw Error("Please provide instrumentation key");this.config=e;var r=this._channelController;i||(i=v.objCreate({addNotificationListener:function(e){},removeNotificationListener:function(e){},eventsSent:function(e){},eventsDiscarded:function(e,t){}})),this._notificationManager=i,e.extensions=$e(e.extensions)?[]:e.extensions,(e.extensionConfig=$e(e.extensionConfig)?{}:e.extensionConfig).NotificationManager=i,n||(n=v.objCreate({throwInternal:function(e,t,n,i,r){void 0===r&&(r=!1)},warnToConsole:function(e){},resetInternalMessageCount:function(){}})),this.logger=n;var o=[];o.push.apply(o,t.concat(e.extensions)),o=Be(o);var a=[],s=[],c={};if(Ze(o,(function(e){if($e(e)||$e(e.initialize))throw Error("Extensions must provide callback to initialize");var t=e.priority,i=e.identifier;e&&t&&($e(c[t])?c[t]=i:n.warnToConsole("Two extensions have same priority #"+t+" - "+c[t]+", "+i)),!t||t<r.priority?a.push(e):s.push(e)})),o.push(r),a.push(r),o=Be(o),this._extensions=o,Ve(new qe([r],e,this),o),Ve(new qe(a,e,this),o),this._extensions=a,0===this.getTransmissionControls().length)throw new Error("No channels available");this._setInit(!0)},e.prototype.getTransmissionControls=function(){return this._channelController.getChannelControls()},e.prototype.track=function(e){var t=this;e.iKey||(e.iKey=t.config.instrumentationKey),e.time||(e.time=v.toISOString(new Date)),$e(e.ver)&&(e.ver="4.0"),t.isInitialized()?(t._eventQueue.length>0&&(Ze(t._eventQueue,(function(e){t.getProcessTelContext().processNext(e)})),t._eventQueue=[]),t.getProcessTelContext().processNext(e)):t._eventQueue.push(e)},e.prototype.getProcessTelContext=function(){var e=this._extensions,t=e;return e&&0!==e.length||(t=[this._channelController]),new qe(t,this.config,this)},e}(),tt=2,nt=function(){function e(){this.listeners=[]}return e.prototype.addNotificationListener=function(e){this.listeners.push(e)},e.prototype.removeNotificationListener=function(e){for(var t=v.arrIndexOf(this.listeners,e);t>-1;)this.listeners.splice(t,1),t=v.arrIndexOf(this.listeners,e)},e.prototype.eventsSent=function(e){for(var t=this,n=function(n){i.listeners[n].eventsSent&&setTimeout((function(){return t.listeners[n].eventsSent(e)}),0)},i=this,r=0;r<this.listeners.length;++r)n(r)},e.prototype.eventsDiscarded=function(e,t){for(var n=this,i=function(i){r.listeners[i].eventsDiscarded&&setTimeout((function(){return n.listeners[i].eventsDiscarded(e,t)}),0)},r=this,o=0;o<this.listeners.length;++o)i(o)},e}(),it=function(e){function t(){return e.call(this)||this}return o(t,e),t.prototype.initialize=function(t,n){this._notificationManager=new nt,this.logger=new Pe(t),this.config=t,e.prototype.initialize.call(this,t,n,this.logger,this._notificationManager)},t.prototype.getTransmissionControls=function(){return e.prototype.getTransmissionControls.call(this)},t.prototype.track=function(t){if(null===t)throw this._notifyInvalidEvent(t),Error("Invalid telemetry item");this._validateTelemetryItem(t),e.prototype.track.call(this,t)},t.prototype.addNotificationListener=function(e){this._notificationManager&&this._notificationManager.addNotificationListener(e)},t.prototype.removeNotificationListener=function(e){this._notificationManager&&this._notificationManager.removeNotificationListener(e)},t.prototype.pollInternalLogs=function(e){var t=this,n=this.config.diagnosticLogInterval;return n&&n>0||(n=1e4),setInterval((function(){var n=t,i=n.logger?n.logger.queue:[];v.arrForEach(i,(function(t){var i={name:e||"InternalMessageId: "+t.messageId,iKey:n.config.instrumentationKey,time:v.toISOString(new Date),baseType:Le.dataType,baseData:{message:t.message}};n.track(i)})),i.length=0}),n)},t.prototype._validateTelemetryItem=function(e){if(v.isNullOrUndefined(e.name))throw this._notifyInvalidEvent(e),Error("telemetry name required")},t.prototype._notifyInvalidEvent=function(e){this._notificationManager&&this._notificationManager.eventsDiscarded([e],tt)},t}(et);!function(e){e[e.LocalStorage=0]="LocalStorage",e[e.SessionStorage=1]="SessionStorage"}(Xe||(Xe={})),function(e){e[e.Default=0]="Default",e[e.Required=1]="Required",e[e.Array=2]="Array",e[e.Hidden=4]="Hidden"}(Ye||(Ye={})),function(e){e[e.AI=0]="AI",e[e.AI_AND_W3C=1]="AI_AND_W3C",e[e.W3C=2]="W3C"}(Je||(Je={}));var rt=function(){function e(){}return e.requestContextHeader="Request-Context",e.requestContextTargetKey="appId",e.requestContextAppIdFormat="appId=cid-v1:",e.requestIdHeader="Request-Id",e.traceParentHeader="traceparent",e.sdkContextHeader="Sdk-Context",e.sdkContextHeaderAppIdRequest="appId",e.requestContextHeaderLowerCase="request-context",e}(),ot=function(){function e(){}return e.sanitizeKeyAndAddUniqueness=function(t,n,i){var r=n.length,o=e.sanitizeKey(t,n);if(o.length!==r){for(var a=0,s=o;void 0!==i[s];)a++,s=o.substring(0,e.MAX_NAME_LENGTH-3)+e.padNumber(a);o=s}return o},e.sanitizeKey=function(t,n){var i;return n&&(n=e.trim(n.toString())).length>e.MAX_NAME_LENGTH&&(i=n.substring(0,e.MAX_NAME_LENGTH),t.throwInternal(m.WARNING,ye,"name is too long.  It has been truncated to "+e.MAX_NAME_LENGTH+" characters.",{name:n},!0)),i||n},e.sanitizeString=function(t,n,i){var r;return void 0===i&&(i=e.MAX_STRING_LENGTH),n&&(i=i||e.MAX_STRING_LENGTH,(n=e.trim(n)).toString().length>i&&(r=n.toString().substring(0,i),t.throwInternal(m.WARNING,_e,"string value is too long. It has been truncated to "+i+" characters.",{value:n},!0))),r||n},e.sanitizeUrl=function(t,n){return e.sanitizeInput(t,n,e.MAX_URL_LENGTH,Ce)},e.sanitizeMessage=function(t,n){var i;return n&&n.length>e.MAX_MESSAGE_LENGTH&&(i=n.substring(0,e.MAX_MESSAGE_LENGTH),t.throwInternal(m.WARNING,ve,"message is too long, it has been truncated to "+e.MAX_MESSAGE_LENGTH+" characters.",{message:n},!0)),i||n},e.sanitizeException=function(t,n){var i;return n&&n.length>e.MAX_EXCEPTION_LENGTH&&(i=n.substring(0,e.MAX_EXCEPTION_LENGTH),t.throwInternal(m.WARNING,he,"exception is too long, it has been truncated to "+e.MAX_EXCEPTION_LENGTH+" characters.",{exception:n},!0)),i||n},e.sanitizeProperties=function(t,n){if(n){var i={};for(var r in n){var o=n[r];if(v.isObject(o)&&Object(s.k)())try{o=Object(s.e)().stringify(o)}catch(e){t.throwInternal(m.WARNING,fe,"custom property is not valid",{exception:e},!0)}o=e.sanitizeString(t,o,e.MAX_PROPERTY_LENGTH),i[r=e.sanitizeKeyAndAddUniqueness(t,r,i)]=o}n=i}return n},e.sanitizeMeasurements=function(t,n){if(n){var i={};for(var r in n){var o=n[r];i[r=e.sanitizeKeyAndAddUniqueness(t,r,i)]=o}n=i}return n},e.sanitizeId=function(t,n){return n?e.sanitizeInput(t,n,e.MAX_ID_LENGTH,De).toString():n},e.sanitizeInput=function(t,n,i,r){var o;return n&&(n=e.trim(n)).length>i&&(o=n.substring(0,i),t.throwInternal(m.WARNING,r,"input is too long, it has been truncated to "+i+" characters.",{data:n},!0)),o||n},e.padNumber=function(e){var t="00"+e;return t.substr(t.length-3)},e.trim=function(e){return v.isString(e)?e.replace(/^\s+|\s+$/g,""):e},e.MAX_NAME_LENGTH=150,e.MAX_ID_LENGTH=128,e.MAX_PROPERTY_LENGTH=8192,e.MAX_STRING_LENGTH=1024,e.MAX_URL_LENGTH=2048,e.MAX_MESSAGE_LENGTH=32768,e.MAX_EXCEPTION_LENGTH=32768,e}(),at=Object(s.g)(),st=v.isString,ct=null;var ut,lt=function(){function e(){}return e.createDomEvent=function(e){var t=null;if(v.isFunction(Event))t=new Event(e);else{var n=Object(s.a)();n&&n.createEvent&&(t=n.createEvent("Event")).initEvent(e,!0,!0)}return t},e.disableStorage=function(){e._canUseLocalStorage=!1,e._canUseSessionStorage=!1},e._getLocalStorageObject=function(){return e.canUseLocalStorage()?e._getVerifiedStorageObject(Xe.LocalStorage):null},e._getVerifiedStorageObject=function(e){var t,n,i=null;try{if(v.isNullOrUndefined(Object(s.b)()))return null;n=new Date,(i=e===Xe.LocalStorage?Object(s.c)("localStorage"):Object(s.c)("sessionStorage")).setItem(n.toString(),n.toString()),t=i.getItem(n.toString())!==n.toString(),i.removeItem(n.toString()),t&&(i=null)}catch(e){i=null}return i},e.isInternalApplicationInsightsEndpoint=function(t){return-1!==e._internalEndpoints.indexOf(t.toLowerCase())},e.canUseLocalStorage=function(){return void 0===e._canUseLocalStorage&&(e._canUseLocalStorage=!!e._getVerifiedStorageObject(Xe.LocalStorage)),e._canUseLocalStorage},e.getStorage=function(t,n){var i=e._getLocalStorageObject();if(null!==i)try{return i.getItem(n)}catch(n){e._canUseLocalStorage=!1,t.throwInternal(m.WARNING,_,"Browser failed read of local storage. "+e.getExceptionName(n),{exception:e.dump(n)})}return null},e.setStorage=function(t,n,i){var r=e._getLocalStorageObject();if(null!==r)try{return r.setItem(n,i),!0}catch(n){e._canUseLocalStorage=!1,t.throwInternal(m.WARNING,T,"Browser failed write to local storage. "+e.getExceptionName(n),{exception:e.dump(n)})}return!1},e.removeStorage=function(t,n){var i=e._getLocalStorageObject();if(null!==i)try{return i.removeItem(n),!0}catch(n){e._canUseLocalStorage=!1,t.throwInternal(m.WARNING,C,"Browser failed removal of local storage item. "+e.getExceptionName(n),{exception:e.dump(n)})}return!1},e._getSessionStorageObject=function(){return e.canUseSessionStorage()?e._getVerifiedStorageObject(Xe.SessionStorage):null},e.canUseSessionStorage=function(){return void 0===e._canUseSessionStorage&&(e._canUseSessionStorage=!!e._getVerifiedStorageObject(Xe.SessionStorage)),e._canUseSessionStorage},e.getSessionStorageKeys=function(){var t=[];if(e.canUseSessionStorage())for(var n in Object(s.c)("sessionStorage"))t.push(n);return t},e.getSessionStorage=function(t,n){var i=e._getSessionStorageObject();if(null!==i)try{return i.getItem(n)}catch(n){e._canUseSessionStorage=!1,t.throwInternal(m.WARNING,b,"Browser failed read of session storage. "+e.getExceptionName(n),{exception:e.dump(n)})}return null},e.setSessionStorage=function(t,n,i){var r=e._getSessionStorageObject();if(null!==r)try{return r.setItem(n,i),!0}catch(n){e._canUseSessionStorage=!1,t.throwInternal(m.WARNING,S,"Browser failed write to session storage. "+e.getExceptionName(n),{exception:e.dump(n)})}return!1},e.removeSessionStorage=function(t,n){var i=e._getSessionStorageObject();if(null!==i)try{return i.removeItem(n),!0}catch(n){e._canUseSessionStorage=!1,t.throwInternal(m.WARNING,w,"Browser failed removal of session storage item. "+e.getExceptionName(n),{exception:e.dump(n)})}return!1},e.disableCookies=function(){v.disableCookies()},e.canUseCookies=function(t){if(void 0===v._canUseCookies){v._canUseCookies=!1;try{v._canUseCookies=void 0!==e.document.cookie}catch(n){t.throwInternal(m.WARNING,Ee,"Cannot access document.cookie - "+e.getExceptionName(n),{exception:e.dump(n)})}}return v._canUseCookies},e.disallowsSameSiteNone=function(e){return!!st(e)&&(-1!==e.indexOf("CPU iPhone OS 12")||-1!==e.indexOf("iPad; CPU OS 12")||(-1!==e.indexOf("Macintosh; Intel Mac OS X 10_14")&&-1!==e.indexOf("Version/")&&-1!==e.indexOf("Safari")||(-1!==e.indexOf("Macintosh; Intel Mac OS X 10_14")&&(n="AppleWebKit/605.1.15 (KHTML, like Gecko)",i=(t=e).length,r=i-n.length,t.substring(r>=0?r:0,i)===n)||(-1!==e.indexOf("Chrome/5")||-1!==e.indexOf("Chrome/6")||(-1!==e.indexOf("UnrealEngine")&&-1===e.indexOf("Chrome")||(-1!==e.indexOf("UCBrowser/12")||-1!==e.indexOf("UCBrowser/11")))))));var t,n,i,r},e.setCookie=function(t,n,i,r){if(e.canUseCookies(t)){var o="",a="";r&&(o=";domain="+r);var c=Object(s.f)();c&&"https:"===c.protocol&&(a=";secure",null===ct&&(ct=e.disallowsSameSiteNone((Object(s.g)()||{}).userAgent)),ct||(i+=";SameSite=None")),e.document.cookie=n+"="+i+o+";path=/"+a}},e.stringToBoolOrDefault=function(e,t){return void 0===t&&(t=!1),null==e?t:"true"===e.toString().toLowerCase()},e.getCookie=function(t,n){if(e.canUseCookies(t)){var i="";if(n&&n.length)for(var r=n+"=",o=e.document.cookie.split(";"),a=0;a<o.length;a++){var s=o[a];if((s=e.trim(s))&&0===s.indexOf(r)){i=s.substring(r.length,o[a].length);break}}return i}},e.deleteCookie=function(t,n){e.canUseCookies(t)&&(e.document.cookie=n+"=;path=/;expires=Thu, 01 Jan 1970 00:00:01 GMT;")},e.trim=function(e){return st(e)?e.replace(/^\s+|\s+$/g,""):e},e.newId=function(){for(var e="",t=1073741824*Math.random();t>0;){e+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(t%64),t=Math.floor(t/64)}return e},e.random32=function(){return 4294967296*Math.random()|0},e.generateW3CId=function(){for(var t,n=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],i="",r=0;r<4;r++)i+=n[15&(t=e.random32())]+n[t>>4&15]+n[t>>8&15]+n[t>>12&15]+n[t>>16&15]+n[t>>20&15]+n[t>>24&15]+n[t>>28&15];var o=n[8+4*Math.random()|0];return i.substr(0,8)+i.substr(9,4)+"4"+i.substr(13,3)+o+i.substr(16,3)+i.substr(19,12)},e.isArray=function(e){return"[object Array]"===Object[s.o].toString.call(e)},e.isError=function(e){return"[object Error]"===Object[s.o].toString.call(e)},e.getIEVersion=function(e){void 0===e&&(e=null);var t=e?e.toLowerCase():at?(at.userAgent||"").toLowerCase():"";return-1!==t.indexOf("msie")?parseInt(t.split("msie")[1]):null},e.msToTimeSpan=function(e){(isNaN(e)||e<0)&&(e=0);var t=""+(e=Math.round(e))%1e3,n=""+Math.floor(e/1e3)%60,i=""+Math.floor(e/6e4)%60,r=""+Math.floor(e/36e5)%24,o=Math.floor(e/864e5);return t=1===t.length?"00"+t:2===t.length?"0"+t:t,n=n.length<2?"0"+n:n,i=i.length<2?"0"+i:i,(o>0?o+".":"")+(r=r.length<2?"0"+r:r)+":"+i+":"+n+"."+t},e.isCrossOriginError=function(e,t,n,i,r){return("Script error."===e||"Script error"===e)&&!r},e.dump=function(e){var t=Object[s.o].toString.call(e),n="";return"[object Error]"===t?n="{ stack: '"+e.stack+"', message: '"+e.message+"', name: '"+e.name+"'":Object(s.k)()&&(n=Object(s.e)().stringify(e)),t+n},e.getExceptionName=function(e){return"[object Error]"===Object[s.o].toString.call(e)?e.name:""},e.addEventHandler=function(e,t){return x.Attach(Object(s.i)(),e,t)},e.IsBeaconApiSupported=function(){return"sendBeacon"in at&&at.sendBeacon},e.getExtension=function(e,t){for(var n=null,i=0;!n&&i<e.length;)e[i]&&e[i].identifier===t&&(n=e[i]),i++;return n},e.document=Object(s.a)()||{},e._canUseLocalStorage=void 0,e._canUseSessionStorage=void 0,e._internalEndpoints=["https://dc.services.visualstudio.com/v2/track","https://breeze.aimon.applicationinsights.io/v2/track","https://dc-int.services.visualstudio.com/v2/track"],e.NotSpecified="not_specified",e.isDate=v.isDate,e.toISOStringForIE8=v.toISOString,e}(),pt=function(){function e(){}return e.parseUrl=function(t){return e.htmlAnchorElement||(e.htmlAnchorElement=e.document.createElement?e.document.createElement("a"):{host:e.parseHost(t)}),e.htmlAnchorElement.href=t,e.htmlAnchorElement},e.getAbsoluteUrl=function(t){var n,i=e.parseUrl(t);return i&&(n=i.href),n},e.getPathName=function(t){var n,i=e.parseUrl(t);return i&&(n=i.pathname),n},e.getCompleteUrl=function(e,t){return e?e.toUpperCase()+" "+t:t},e.parseHost=function(e){if(e){var t=e.match(/:\/\/(www[0-9]?\.)?(.[^/:]+)/i);if(null!=t&&t.length>2&&st(t[2])&&t[2].length>0)return t[2]}return null},e.document=Object(s.a)()||{},e}(),ft=function(){function e(){}return e.canIncludeCorrelationHeader=function(e,t,n){if(e&&e.disableCorrelationHeaders)return!1;if(!t)return!1;var i=pt.parseUrl(t).host.toLowerCase();if(!(e&&e.enableCorsCorrelation||i===n))return!1;var r,o=e&&e.correlationHeaderDomains;if(o&&(v.arrForEach(o,(function(e){var t=new RegExp(e.toLowerCase().replace(/\./g,".").replace(/\*/g,".*"));r=r||t.test(i)})),!r))return!1;var a=e&&e.correlationHeaderExcludedDomains;if(!a||0===a.length)return!0;for(var s=0;s<a.length;s++){if(new RegExp(a[s].toLowerCase().replace(/\./g,".").replace(/\*/g,".*")).test(i))return!1}return i&&i.length>0},e.getCorrelationContext=function(t){if(t){var n=e.getCorrelationContextValue(t,rt.requestContextTargetKey);if(n&&n!==e.correlationIdPrefix)return n}},e.getCorrelationContextValue=function(e,t){if(e)for(var n=e.split(","),i=0;i<n.length;++i){var r=n[i].split("=");if(2===r.length&&r[0]===t)return r[1]}},e.correlationIdPrefix="cid-v1:",e}(),dt=function(){function e(){}return e.ParseDependencyPath=function(e,t,n,i){var r,o=i,a=i;if(t&&t.length>0){var s=pt.parseUrl(t);if(r=s.host,!o)if(null!=s.pathname){var c=0===s.pathname.length?"/":s.pathname;"/"!==c.charAt(0)&&(c="/"+c),a=s.pathname,o=ot.sanitizeString(e,n?n+" "+c:c)}else o=ot.sanitizeString(e,t)}else r=i,o=i;return{target:r,name:o,data:a}},e}(),ht=function(){function e(){}return e.Now=function(){var e=Object(s.h)();return e&&e.now&&e.timing?e.now()+e.timing.navigationStart:(new Date).getTime()},e.GetDuration=function(e,t){var n=null;return 0===e||0===t||v.isNullOrUndefined(e)||v.isNullOrUndefined(t)||(n=t-e),n},e}(),gt="Microsoft_ApplicationInsights_BypassAjaxInstrumentation",mt="sampleRate",vt="ProcessLegacy",yt="http.method",xt="https://dc.services.visualstudio.com",It=function(){function e(){}return e.parse=function(t){if(!t)return{};var n=t.split(e._FIELDS_SEPARATOR),i=v.arrReduce(n,(function(t,n){var i=n.split(e._FIELD_KEY_VALUE_SEPARATOR);if(2===i.length){var r=i[0].toLowerCase(),o=i[1];t[r]=o}return t}),{});if(v.objKeys(i).length>0){if(i.endpointsuffix){var r=i.location?i.location+".":"";i.ingestionendpoint=i.ingestionendpoint||"https://"+r+"dc."+i.endpointsuffix}i.ingestionendpoint=i.ingestionendpoint||xt}return i},e._FIELDS_SEPARATOR=";",e._FIELD_KEY_VALUE_SEPARATOR="=",e}(),_t=function(){},bt=function(e){function t(){return e.call(this)||this}return o(t,e),t}(_t),Tt=function(e){function t(t,n,i){var r=e.call(this)||this;return r.name=ot.sanitizeString(t,i)||lt.NotSpecified,r.data=n,r.time=v.toISOString(new Date),r.aiDataContract={time:Ye.Required,iKey:Ye.Required,name:Ye.Required,sampleRate:function(){return 100===r.sampleRate?Ye.Hidden:Ye.Required},tags:Ye.Required,data:Ye.Required},r}return o(t,e),t}((function(){this.ver=1,this.sampleRate=100,this.tags={}})),St=function(){},Ct=function(e){function t(){var t=e.call(this)||this;return t.ver=2,t.properties={},t.measurements={},t}return o(t,e),t}(St),wt=function(e){function t(t,n,i,r){var o=e.call(this)||this;return o.aiDataContract={ver:Ye.Required,name:Ye.Required,properties:Ye.Default,measurements:Ye.Default},o.name=ot.sanitizeString(t,n)||lt.NotSpecified,o.properties=ot.sanitizeProperties(t,i),o.measurements=ot.sanitizeMeasurements(t,r),o}return o(t,e),t.envelopeType="Microsoft.ApplicationInsights.{0}.Event",t.dataType="EventData",t}(Ct),Et=function(){},Dt=function(){this.hasFullStack=!0,this.parsedStack=[]},Nt=function(e){function t(t,n,i,r,o,a){var s=e.call(this)||this;return s.aiDataContract={ver:Ye.Required,exceptions:Ye.Required,severityLevel:Ye.Default,properties:Ye.Default,measurements:Ye.Default},n instanceof Error?(s.exceptions=[new At(t,n)],s.properties=ot.sanitizeProperties(t,i),s.measurements=ot.sanitizeMeasurements(t,r),o&&(s.severityLevel=o),a&&(s.id=a)):(s.exceptions=n.exceptions,s.properties=n.properties,s.measurements=n.measurements,n.severityLevel&&(s.severityLevel=n.severityLevel),n.id&&(s.id=n.id),n.problemGroup&&(s.problemGroup=n.problemGroup),s.ver=2,v.isNullOrUndefined(n.isManual)||(s.isManual=n.isManual)),s}return o(t,e),t.CreateFromInterface=function(e,n){var i=n.exceptions&&v.arrMap(n.exceptions,(function(t){return At.CreateFromInterface(e,t)}));return new t(e,a({},n,{exceptions:i}))},t.prototype.toInterface=function(){var e=this,t=e.exceptions,n=e.properties,i=e.measurements,r=e.severityLevel,o=(e.ver,e.problemGroup),a=e.id,s=e.isManual;return{ver:"4.0",exceptions:t instanceof Array&&v.arrMap(t,(function(e){return e.toInterface()}))||void 0,severityLevel:r,properties:n,measurements:i,problemGroup:o,id:a,isManual:s}},t.CreateSimpleException=function(e,t,n,i,r,o){return{exceptions:[{hasFullStack:!0,message:e,stack:r,typeName:t}]}},t.envelopeType="Microsoft.ApplicationInsights.{0}.Exception",t.dataType="ExceptionData",t}(function(e){function t(){var t=e.call(this)||this;return t.ver=2,t.exceptions=[],t.properties={},t.measurements={},t}return o(t,e),t}(St)),At=function(e){function t(n,i){var r=e.call(this)||this;if(r.aiDataContract={id:Ye.Default,outerId:Ye.Default,typeName:Ye.Required,message:Ye.Required,hasFullStack:Ye.Default,stack:Ye.Default,parsedStack:Ye.Array},i instanceof Error){r.typeName=ot.sanitizeString(n,i.name)||lt.NotSpecified,r.message=ot.sanitizeMessage(n,i.message)||lt.NotSpecified;var o=i.stack;r.parsedStack=t.parseStack(o),r.stack=ot.sanitizeException(n,o),r.hasFullStack=lt.isArray(r.parsedStack)&&r.parsedStack.length>0}else r.typeName=i.typeName,r.message=i.message,r.stack=i.stack,r.parsedStack=i.parsedStack,r.hasFullStack=i.hasFullStack;return r}return o(t,e),t.prototype.toInterface=function(){var e=this.parsedStack instanceof Array&&v.arrMap(this.parsedStack,(function(e){return e.toInterface()}));return{id:this.id,outerId:this.outerId,typeName:this.typeName,message:this.message,hasFullStack:this.hasFullStack,stack:this.stack,parsedStack:e||void 0}},t.CreateFromInterface=function(e,n){var i=n.parsedStack instanceof Array&&v.arrMap(n.parsedStack,(function(e){return kt.CreateFromInterface(e)}))||n.parsedStack;return new t(e,a({},n,{parsedStack:i}))},t.parseStack=function(e){var t;if(v.isString(e)){var n=e.split("\n");t=[];for(var i=0,r=0,o=0;o<=n.length;o++){var a=n[o];if(kt.regex.test(a)){var s=new kt(n[o],i++);r+=s.sizeInBytes,t.push(s)}}if(r>32768)for(var c=0,u=t.length-1,l=0,p=c,f=u;c<u;){if((l+=t[c].sizeInBytes+t[u].sizeInBytes)>32768){var d=f-p+1;t.splice(p,d);break}p=c,f=u,c++,u--}}return t},t}(Dt),kt=function(e){function t(n,i){var r=e.call(this)||this;if(r.sizeInBytes=0,r.aiDataContract={level:Ye.Required,method:Ye.Required,assembly:Ye.Default,fileName:Ye.Default,line:Ye.Default},"string"==typeof n){var o=n;r.level=i,r.method="<no_method>",r.assembly=lt.trim(o),r.fileName="",r.line=0;var a=o.match(t.regex);a&&a.length>=5&&(r.method=lt.trim(a[2])||r.method,r.fileName=lt.trim(a[4]),r.line=parseInt(a[5])||0)}else r.level=n.level,r.method=n.method,r.assembly=n.assembly,r.fileName=n.fileName,r.line=n.line,r.sizeInBytes=0;return r.sizeInBytes+=r.method.length,r.sizeInBytes+=r.fileName.length,r.sizeInBytes+=r.assembly.length,r.sizeInBytes+=t.baseSize,r.sizeInBytes+=r.level.toString().length,r.sizeInBytes+=r.line.toString().length,r}return o(t,e),t.CreateFromInterface=function(e){return new t(e,null)},t.prototype.toInterface=function(){return{level:this.level,method:this.method,assembly:this.assembly,fileName:this.fileName,line:this.line}},t.regex=/^([\s]+at)?(.*?)(\@|\s\(|\s)([^\(\@\n]+):([0-9]+):([0-9]+)(\)?)$/,t.baseSize=58,t}(Et),Rt=function(e){function t(){var t=e.call(this)||this;return t.ver=2,t.metrics=[],t.properties={},t.measurements={},t}return o(t,e),t}(St);!function(e){e[e.Measurement=0]="Measurement",e[e.Aggregation=1]="Aggregation"}(ut||(ut={}));var Lt,Pt=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.aiDataContract={name:Ye.Required,kind:Ye.Default,value:Ye.Required,count:Ye.Default,min:Ye.Default,max:Ye.Default,stdDev:Ye.Default},t}return o(t,e),t}((function(){this.kind=ut.Measurement})),Mt=function(e){function t(t,n,i,r,o,a,s,c){var u=e.call(this)||this;u.aiDataContract={ver:Ye.Required,metrics:Ye.Required,properties:Ye.Default};var l=new Pt;return l.count=r>0?r:void 0,l.max=isNaN(a)||null===a?void 0:a,l.min=isNaN(o)||null===o?void 0:o,l.name=ot.sanitizeString(t,n)||lt.NotSpecified,l.value=i,u.metrics=[l],u.properties=ot.sanitizeProperties(t,s),u.measurements=ot.sanitizeMeasurements(t,c),u}return o(t,e),t.envelopeType="Microsoft.ApplicationInsights.{0}.Metric",t.dataType="MetricData",t}(Rt),Ut=function(e){function t(){var t=e.call(this)||this;return t.ver=2,t.properties={},t.measurements={},t}return o(t,e),t}(Ct),Ot=function(e){function t(t,n,i,r,o,a,s){var c=e.call(this)||this;return c.aiDataContract={ver:Ye.Required,name:Ye.Default,url:Ye.Default,duration:Ye.Default,properties:Ye.Default,measurements:Ye.Default,id:Ye.Default},c.id=ot.sanitizeId(t,s),c.url=ot.sanitizeUrl(t,i),c.name=ot.sanitizeString(t,n)||lt.NotSpecified,isNaN(r)||(c.duration=lt.msToTimeSpan(r)),c.properties=ot.sanitizeProperties(t,o),c.measurements=ot.sanitizeMeasurements(t,a),c}return o(t,e),t.envelopeType="Microsoft.ApplicationInsights.{0}.Pageview",t.dataType="PageviewData",t}(Ut),jt=function(e){function t(t,n,i,r,o,a,s,c,u,l,p,f){void 0===u&&(u="Ajax");var d=e.call(this)||this;d.aiDataContract={id:Ye.Required,ver:Ye.Required,name:Ye.Default,resultCode:Ye.Default,duration:Ye.Default,success:Ye.Default,data:Ye.Default,target:Ye.Default,type:Ye.Default,properties:Ye.Default,measurements:Ye.Default,kind:Ye.Default,value:Ye.Default,count:Ye.Default,min:Ye.Default,max:Ye.Default,stdDev:Ye.Default,dependencyKind:Ye.Default,dependencySource:Ye.Default,commandName:Ye.Default,dependencyTypeName:Ye.Default},d.id=n,d.duration=lt.msToTimeSpan(o),d.success=a,d.resultCode=s+"",d.type=ot.sanitizeString(t,u);var h=dt.ParseDependencyPath(t,i,c,r);return d.data=ot.sanitizeUrl(t,r)||h.data,d.target=ot.sanitizeString(t,h.target),l&&(d.target=d.target+" | "+l),d.name=ot.sanitizeString(t,h.name),d.properties=ot.sanitizeProperties(t,p),d.measurements=ot.sanitizeMeasurements(t,f),d}return o(t,e),t.envelopeType="Microsoft.ApplicationInsights.{0}.RemoteDependency",t.dataType="RemoteDependencyData",t}(function(e){function t(){var t=e.call(this)||this;return t.ver=2,t.success=!0,t.properties={},t.measurements={},t}return o(t,e),t}(St)),qt=function(e){function t(t,n,i,r,o){var a=e.call(this)||this;return a.aiDataContract={ver:Ye.Required,message:Ye.Required,severityLevel:Ye.Default,properties:Ye.Default},n=n||lt.NotSpecified,a.message=ot.sanitizeMessage(t,n),a.properties=ot.sanitizeProperties(t,r),a.measurements=ot.sanitizeMeasurements(t,o),i&&(a.severityLevel=i),a}return o(t,e),t.envelopeType="Microsoft.ApplicationInsights.{0}.Message",t.dataType="MessageData",t}(function(e){function t(){var t=e.call(this)||this;return t.ver=2,t.properties={},t.measurements={},t}return o(t,e),t}(St)),Ft=function(e){function t(t,n,i,r,o,a,s){var c=e.call(this)||this;return c.aiDataContract={ver:Ye.Required,name:Ye.Default,url:Ye.Default,duration:Ye.Default,perfTotal:Ye.Default,networkConnect:Ye.Default,sentRequest:Ye.Default,receivedResponse:Ye.Default,domProcessing:Ye.Default,properties:Ye.Default,measurements:Ye.Default},c.url=ot.sanitizeUrl(t,i),c.name=ot.sanitizeString(t,n)||lt.NotSpecified,c.properties=ot.sanitizeProperties(t,o),c.measurements=ot.sanitizeMeasurements(t,a),s&&(c.domProcessing=s.domProcessing,c.duration=s.duration,c.networkConnect=s.networkConnect,c.perfTotal=s.perfTotal,c.receivedResponse=s.receivedResponse,c.sentRequest=s.sentRequest),c}return o(t,e),t.envelopeType="Microsoft.ApplicationInsights.{0}.PageviewPerformance",t.dataType="PageviewPerformanceData",t}(function(e){function t(){var t=e.call(this)||this;return t.ver=2,t.properties={},t.measurements={},t}return o(t,e),t}(Ut)),zt=function(e){function t(t,n){var i=e.call(this)||this;return i.aiDataContract={baseType:Ye.Required,baseData:Ye.Required},i.baseType=t,i.baseData=n,i}return o(t,e),t}(bt);!function(e){e[e.Verbose=0]="Verbose",e[e.Information=1]="Information",e[e.Warning=2]="Warning",e[e.Error=3]="Error",e[e.Critical=4]="Critical"}(Lt||(Lt={}));var Ht=function(){function e(){}return e.getConfig=function(e,t,n,i){var r;return void 0===i&&(i=!1),r=n&&e.extensionConfig&&e.extensionConfig[n]&&!v.isNullOrUndefined(e.extensionConfig[n][t])?e.extensionConfig[n][t]:e[t],v.isNullOrUndefined(r)?i:r},e}(),Vt=function(){this.applicationVersion="ai.application.ver",this.applicationBuild="ai.application.build",this.applicationTypeId="ai.application.typeId",this.applicationId="ai.application.applicationId",this.applicationLayer="ai.application.layer",this.deviceId="ai.device.id",this.deviceIp="ai.device.ip",this.deviceLanguage="ai.device.language",this.deviceLocale="ai.device.locale",this.deviceModel="ai.device.model",this.deviceFriendlyName="ai.device.friendlyName",this.deviceNetwork="ai.device.network",this.deviceNetworkName="ai.device.networkName",this.deviceOEMName="ai.device.oemName",this.deviceOS="ai.device.os",this.deviceOSVersion="ai.device.osVersion",this.deviceRoleInstance="ai.device.roleInstance",this.deviceRoleName="ai.device.roleName",this.deviceScreenResolution="ai.device.screenResolution",this.deviceType="ai.device.type",this.deviceMachineName="ai.device.machineName",this.deviceVMName="ai.device.vmName",this.deviceBrowser="ai.device.browser",this.deviceBrowserVersion="ai.device.browserVersion",this.locationIp="ai.location.ip",this.locationCountry="ai.location.country",this.locationProvince="ai.location.province",this.locationCity="ai.location.city",this.operationId="ai.operation.id",this.operationName="ai.operation.name",this.operationParentId="ai.operation.parentId",this.operationRootId="ai.operation.rootId",this.operationSyntheticSource="ai.operation.syntheticSource",this.operationCorrelationVector="ai.operation.correlationVector",this.sessionId="ai.session.id",this.sessionIsFirst="ai.session.isFirst",this.sessionIsNew="ai.session.isNew",this.userAccountAcquisitionDate="ai.user.accountAcquisitionDate",this.userAccountId="ai.user.accountId",this.userAgent="ai.user.userAgent",this.userId="ai.user.id",this.userStoreRegion="ai.user.storeRegion",this.userAuthUserId="ai.user.authUserId",this.userAnonymousUserAcquisitionDate="ai.user.anonUserAcquisitionDate",this.userAuthenticatedUserAcquisitionDate="ai.user.authUserAcquisitionDate",this.cloudName="ai.cloud.name",this.cloudRole="ai.cloud.role",this.cloudRoleVer="ai.cloud.roleVer",this.cloudRoleInstance="ai.cloud.roleInstance",this.cloudEnvironment="ai.cloud.environment",this.cloudLocation="ai.cloud.location",this.cloudDeploymentUnit="ai.cloud.deploymentUnit",this.internalNodeName="ai.internal.nodeName",this.internalSdkVersion="ai.internal.sdkVersion",this.internalAgentVersion="ai.internal.agentVersion"},Bt=function(){function e(){}return e.create=function(e,t,n,i,r,o){if(n=ot.sanitizeString(i,n)||lt.NotSpecified,v.isNullOrUndefined(e)||v.isNullOrUndefined(t)||v.isNullOrUndefined(n))throw Error("Input doesn't contain all required fields");var a={name:n,time:v.toISOString(new Date),iKey:"",ext:o||{},tags:[],data:{},baseType:t,baseData:e};if(!v.isNullOrUndefined(r))for(var s in r)r.hasOwnProperty(s)&&(a.data[s]=r[s]);return a},e}(),Gt=function(){function e(){}return e.UserExt="user",e.DeviceExt="device",e.TraceExt="trace",e.WebExt="web",e.AppExt="app",e.OSExt="os",e.SessionExt="ses",e.SDKExt="sdk",e}(),Wt=new Vt,Kt="AppInsightsPropertiesPlugin",Xt="AppInsightsChannelPlugin",Yt="ApplicationInsightsAnalytics",Jt=0;function Qt(e,t){return e&&Object.prototype.hasOwnProperty.call(e,t)}function Zt(e){return"function"==typeof e}function $t(e){return e&&(e===Object.prototype||e===Array.prototype)}function en(e){return $t(e)||e===Function.prototype}function tn(e){if(e){if(Object.getPrototypeOf)return Object.getPrototypeOf(e);if($t(e.__proto__))return e.__proto__;var t=e.constructor;if(t)return t.prototype}return null}function nn(e,t){return"constructor"!==t&&Zt(e[t])&&Qt(e,t)}function rn(e){throw new TypeError("DynamicProto: "+e)}function on(e,t){return Qt(e,"prototype")?e.name||t||"_unknown_":((e||{}).constructor||{}).name||t||"_unknown_"}var an=function(e,t,n){Qt(e,"prototype")||rn("theClass is an invalid class definition.");var i=e.prototype;(function(e,t){for(var n=tn(t);n&&!en(n);){if(n===e)return!0;n=tn(n)}return!1})(i,t)||rn("["+on(e)+"] is not in class heirarchy of ["+on(t)+"]");var r=null;Qt(i,"_dynClass")?r=i._dynClass:(r="_dynCls$"+on(e,"_")+"$"+Jt,Jt++,i._dynClass=r);var o=function(e){var t={};for(var n in e)!t[n]&&nn(e,n)&&(t[n]=e[n]);return t}(t);n(t,function(e,t,n){function i(e,t){return function(){return t.apply(e,arguments)}}var r={};for(var o in n)r[o]=i(t,n[o]);for(var a=tn(e);a&&!en(a);){for(var o in a)!r[o]&&nn(a,o)&&(r[o]=i(t,a[o]));a=tn(a)}return r}(i,t,o)),function(e,t,n,i){function r(e,t){var n=function(){var i=this;if(i&&Qt(e,"_dynClass")){var r=((i._dynInstFuncs||{})[e._dynClass]||{})[t];if(r)return r.apply(i,arguments);rn("Missing ["+t+"] function")}var o=e[t];return o===n&&(o=tn(e)[t]),Zt(o)||rn("["+t+"] is not a function"),o.apply(i,arguments)};return n._isDynProxy=1,n}if(!$t(e)){var o=n._dynInstFuncs=n._dynInstFuncs||{},a=o[t]=o[t]||{};for(var s in n)nn(n,s)&&n[s]!==i[s]&&(a[s]=n[s],delete n[s],(!Qt(e,s)||e[s]&&!e[s]._isDynProxy)&&(e[s]=r(e,s)))}}(i,r,t,o)},sn=function e(t,n,i,r){an(e,this,(function(e){var o,a=v.arrForEach,c=v.isNullOrUndefined,u=null,l=[],p=!1;function f(){i&&a(i.getTransmissionControls(),(function(e){a(e,(function(e){return e.flush(!0)}))}))}i&&(o=i.logger),e.trackPageView=function(e,i){var d=e.name;if(c(d)||"string"!=typeof d){var h=Object(s.a)();d=e.name=h&&h.title||""}var g=e.uri;if(c(g)||"string"!=typeof g){var v=Object(s.f)();g=e.uri=v&&v.href||""}if(!r.isPerformanceTimingSupported())return t.sendPageViewInternal(e,i),f(),void o.throwInternal(m.WARNING,B,"trackPageView: navigation timing API used for calculation of page duration is not supported in this browser. This page view will be collected without duration and timing info.");var y,x,I,_=!1,b=r.getPerformanceTiming().navigationStart;y=ht.GetDuration(b,+new Date),r.shouldCollectDuration(y)||(y=void 0),c(i)||c(i.duration)||(x=i.duration),!n&&isNaN(x)||(isNaN(x)&&(i||(i={}),i.duration=y),t.sendPageViewInternal(e,i),f(),_=!0),i||(i={}),I=function(){var n=!1;try{if(r.isPerformanceTimingDataReady()){n=!0;var a={name:d,uri:g};r.populatePageViewPerformanceEvent(a),a.isValid||_?(_||(i.duration=a.durationMs,t.sendPageViewInternal(e,i)),p||(t.sendPageViewPerformanceInternal(a,i),p=!0)):(i.duration=y,t.sendPageViewInternal(e,i))}else ht.GetDuration(b,+new Date)>6e4&&(n=!0,_||(i.duration=6e4,t.sendPageViewInternal(e,i)))}catch(e){o.throwInternal(m.CRITICAL,ne,"trackPageView failed on page load calculation: "+lt.getExceptionName(e),{exception:lt.dump(e)})}return n},l.push(I),u||(u=setInterval((function(){var e=l.slice(0),t=!1;l=[],a(e,(function(e){e()?t=!0:l.push(e)})),0===l.length&&(clearInterval(u),u=null),t&&f()}),100))}}))},cn=function(){function e(e,t){this.prevPageVisitDataKeyName="prevPageVisitData",this.pageVisitTimeTrackingHandler=t,this._logger=e}return e.prototype.trackPreviousPageVisit=function(e,t){try{var n=this.restartPageVisitTimer(e,t);n&&this.pageVisitTimeTrackingHandler(n.pageName,n.pageUrl,n.pageVisitTime)}catch(e){this._logger.warnToConsole("Auto track page visit time failed, metric will not be collected: "+lt.dump(e))}},e.prototype.restartPageVisitTimer=function(e,t){try{var n=this.stopPageVisitTimer();return this.startPageVisitTimer(e,t),n}catch(e){return this._logger.warnToConsole("Call to restart failed: "+lt.dump(e)),null}},e.prototype.startPageVisitTimer=function(e,t){try{if(lt.canUseSessionStorage()){if(null!=lt.getSessionStorage(this._logger,this.prevPageVisitDataKeyName))throw new Error("Cannot call startPageVisit consecutively without first calling stopPageVisit");var n=new un(e,t),i=Object(s.e)().stringify(n);lt.setSessionStorage(this._logger,this.prevPageVisitDataKeyName,i)}}catch(e){this._logger.warnToConsole("Call to start failed: "+lt.dump(e))}},e.prototype.stopPageVisitTimer=function(){try{if(lt.canUseSessionStorage()){var e=Date.now(),t=lt.getSessionStorage(this._logger,this.prevPageVisitDataKeyName);if(t&&Object(s.k)()){var n=Object(s.e)().parse(t);return n.pageVisitTime=e-n.pageVisitStartTime,lt.removeSessionStorage(this._logger,this.prevPageVisitDataKeyName),n}return null}return null}catch(e){return this._logger.warnToConsole("Stop page visit timer failed: "+lt.dump(e)),null}},e}(),un=function(e,t){this.pageVisitStartTime=Date.now(),this.pageName=e,this.pageUrl=t},ln=function(){function e(e){this.MAX_DURATION_ALLOWED=36e5,e&&(this._logger=e.logger)}return e.prototype.populatePageViewPerformanceEvent=function(e){e.isValid=!1;var t=this.getPerformanceNavigationTiming(),n=this.getPerformanceTiming();if(t||n){if(t)var i=t.duration,r=ht.GetDuration(t.startTime,t.connectEnd),o=ht.GetDuration(t.requestStart,t.responseStart),a=ht.GetDuration(t.responseStart,t.responseEnd),s=ht.GetDuration(t.responseEnd,t.loadEventEnd);else i=ht.GetDuration(n.navigationStart,n.loadEventEnd),r=ht.GetDuration(n.navigationStart,n.connectEnd),o=ht.GetDuration(n.requestStart,n.responseStart),a=ht.GetDuration(n.responseStart,n.responseEnd),s=ht.GetDuration(n.responseEnd,n.loadEventEnd);0===i?this._logger.throwInternal(m.WARNING,A,"error calculating page view performance.",{total:i,network:r,request:o,response:a,dom:s}):this.shouldCollectDuration(i,r,o,a,s)?i<Math.floor(r)+Math.floor(o)+Math.floor(a)+Math.floor(s)?this._logger.throwInternal(m.WARNING,D,"client performance math error.",{total:i,network:r,request:o,response:a,dom:s}):(e.durationMs=i,e.perfTotal=e.duration=lt.msToTimeSpan(i),e.networkConnect=lt.msToTimeSpan(r),e.sentRequest=lt.msToTimeSpan(o),e.receivedResponse=lt.msToTimeSpan(a),e.domProcessing=lt.msToTimeSpan(s),e.isValid=!0):this._logger.throwInternal(m.WARNING,ce,"Invalid page load duration value. Browser perf data won't be sent.",{total:i,network:r,request:o,response:a,dom:s})}},e.prototype.getPerformanceTiming=function(){return this.isPerformanceTimingSupported()?Object(s.h)().timing:null},e.prototype.getPerformanceNavigationTiming=function(){return this.isPerformanceNavigationTimingSupported()?Object(s.h)().getEntriesByType("navigation")[0]:null},e.prototype.isPerformanceNavigationTimingSupported=function(){var e=Object(s.h)();return e&&e.getEntriesByType&&e.getEntriesByType("navigation").length>0},e.prototype.isPerformanceTimingSupported=function(){var e=Object(s.h)();return e&&e.timing},e.prototype.isPerformanceTimingDataReady=function(){var e=Object(s.h)(),t=e?e.timing:0;return t&&t.domainLookupStart>0&&t.navigationStart>0&&t.responseStart>0&&t.requestStart>0&&t.loadEventEnd>0&&t.responseEnd>0&&t.connectEnd>0&&t.domLoading>0},e.prototype.shouldCollectDuration=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=Object(s.g)()||{},i=["googlebot","adsbot-google","apis-google","mediapartners-google"],r=n.userAgent,o=!1;if(r)for(var a=0;a<i.length;a++)o=o||-1!==r.toLowerCase().indexOf(i[a]);if(o)return!1;for(a=0;a<e.length;a++)if(e[a]>=this.MAX_DURATION_ALLOWED)return!1;return!0},e}();
/*!
 * Application Insights JavaScript SDK - Web Analytics, 2.5.1
 * Copyright (c) Microsoft and contributors. All rights reserved.
 */function pn(e,t){e&&e.dispatchEvent&&t&&e.dispatchEvent(t)}var fn=function(e){function t(){var t=e.call(this)||this;t.identifier=Yt,t.priority=180,t.autoRoutePVDelay=500,t._trackAjaxAttempts=0;var n=Object(s.f)();return t._prevUri=n&&n.href||"",t}return o(t,e),t.getDefaultConfig=function(e){return e||(e={}),e.sessionRenewalMs=18e5,e.sessionExpirationMs=864e5,e.disableExceptionTracking=lt.stringToBoolOrDefault(e.disableExceptionTracking),e.autoTrackPageVisitTime=lt.stringToBoolOrDefault(e.autoTrackPageVisitTime),e.overridePageViewDuration=lt.stringToBoolOrDefault(e.overridePageViewDuration),e.enableUnhandledPromiseRejectionTracking=lt.stringToBoolOrDefault(e.enableUnhandledPromiseRejectionTracking),(isNaN(e.samplingPercentage)||e.samplingPercentage<=0||e.samplingPercentage>=100)&&(e.samplingPercentage=100),e.isCookieUseDisabled=lt.stringToBoolOrDefault(e.isCookieUseDisabled),e.isStorageUseDisabled=lt.stringToBoolOrDefault(e.isStorageUseDisabled),e.isBrowserLinkTrackingEnabled=lt.stringToBoolOrDefault(e.isBrowserLinkTrackingEnabled),e.enableAutoRouteTracking=lt.stringToBoolOrDefault(e.enableAutoRouteTracking),e.namePrefix=e.namePrefix||"",e},t.prototype.processTelemetry=function(e,t){var n=!1,i=this._telemetryInitializers.length;t=this._getTelCtx(t);for(var r=0;r<i;++r){var o=this._telemetryInitializers[r];if(o)try{if(!1===o.apply(null,[e])){n=!0;break}}catch(e){t.diagLog().throwInternal(m.CRITICAL,Se,"One of telemetry initializers failed, telemetry item will not be sent: "+lt.getExceptionName(e),{exception:lt.dump(e)},!0)}}n||this.processNext(e,t)},t.prototype.trackEvent=function(e,t){try{var n=Bt.create(e,wt.dataType,wt.envelopeType,this.diagLog(),t);this.core.track(n)}catch(e){this.diagLog().throwInternal(m.WARNING,ie,"trackTrace failed, trace will not be collected: "+lt.getExceptionName(e),{exception:lt.dump(e)})}},t.prototype.startTrackEvent=function(e){try{this._eventTracking.start(e)}catch(e){this.diagLog().throwInternal(m.CRITICAL,X,"startTrackEvent failed, event will not be collected: "+lt.getExceptionName(e),{exception:lt.dump(e)})}},t.prototype.stopTrackEvent=function(e,t,n){try{this._eventTracking.stop(e,void 0,t)}catch(e){this.diagLog().throwInternal(m.CRITICAL,Y,"stopTrackEvent failed, event will not be collected: "+lt.getExceptionName(e),{exception:lt.dump(e)})}},t.prototype.trackTrace=function(e,t){try{var n=Bt.create(e,qt.dataType,qt.envelopeType,this.diagLog(),t);this.core.track(n)}catch(e){this.diagLog().throwInternal(m.WARNING,ie,"trackTrace failed, trace will not be collected: "+lt.getExceptionName(e),{exception:lt.dump(e)})}},t.prototype.trackMetric=function(e,t){try{var n=Bt.create(e,Mt.dataType,Mt.envelopeType,this.diagLog(),t);this.core.track(n)}catch(e){this.diagLog().throwInternal(m.CRITICAL,ee,"trackMetric failed, metric will not be collected: "+lt.getExceptionName(e),{exception:lt.dump(e)})}},t.prototype.trackPageView=function(e,t){try{var n=e||{};this._pageViewManager.trackPageView(n,a({},n.properties,n.measurements,t)),this.config.autoTrackPageVisitTime&&this._pageVisitTimeManager.trackPreviousPageVisit(n.name,n.uri)}catch(e){this.diagLog().throwInternal(m.CRITICAL,te,"trackPageView failed, page view will not be collected: "+lt.getExceptionName(e),{exception:lt.dump(e)})}},t.prototype.sendPageViewInternal=function(e,t,n){var i=Object(s.a)();i&&(e.refUri=void 0===e.refUri?i.referrer:e.refUri);var r=Bt.create(e,Ot.dataType,Ot.envelopeType,this.diagLog(),t,n);this.core.track(r),this._trackAjaxAttempts=0},t.prototype.sendPageViewPerformanceInternal=function(e,t,n){var i=Bt.create(e,Ft.dataType,Ft.envelopeType,this.diagLog(),t,n);this.core.track(i)},t.prototype.trackPageViewPerformance=function(e,t){try{this._pageViewPerformanceManager.populatePageViewPerformanceEvent(e),this.sendPageViewPerformanceInternal(e,t)}catch(e){this.diagLog().throwInternal(m.CRITICAL,te,"trackPageViewPerformance failed, page view will not be collected: "+lt.getExceptionName(e),{exception:lt.dump(e)})}},t.prototype.startTrackPage=function(e){try{if("string"!=typeof e){var t=Object(s.a)();e=t&&t.title||""}this._pageTracking.start(e)}catch(e){this.diagLog().throwInternal(m.CRITICAL,J,"startTrackPage failed, page view may not be collected: "+lt.getExceptionName(e),{exception:lt.dump(e)})}},t.prototype.stopTrackPage=function(e,t,n,i){try{if("string"!=typeof e){var r=Object(s.a)();e=r&&r.title||""}if("string"!=typeof t){var o=Object(s.f)();t=o&&o.href||""}this._pageTracking.stop(e,t,n,i),this.config.autoTrackPageVisitTime&&this._pageVisitTimeManager.trackPreviousPageVisit(e,t)}catch(e){this.diagLog().throwInternal(m.CRITICAL,Q,"stopTrackPage failed, page view will not be collected: "+lt.getExceptionName(e),{exception:lt.dump(e)})}},t.prototype.sendExceptionInternal=function(e,t,n){var i=new Nt(this.diagLog(),e.exception||new Error(lt.NotSpecified),e.properties,e.measurements,e.severityLevel,e.id).toInterface(),r=Bt.create(i,Nt.dataType,Nt.envelopeType,this.diagLog(),t,n);this.core.track(r)},t.prototype.trackException=function(e,t){try{this.sendExceptionInternal(e,t)}catch(e){this.diagLog().throwInternal(m.CRITICAL,$,"trackException failed, exception will not be collected: "+lt.getExceptionName(e),{exception:lt.dump(e)})}},t.prototype._onerror=function(e){try{var t={url:e&&e.url||(Object(s.a)()||{}).URL,lineNumber:e.lineNumber,columnNumber:e.columnNumber,message:e.message};if(lt.isCrossOriginError(e.message,e.url,e.lineNumber,e.columnNumber,e.error))this._sendCORSException(t.url);else{if(!lt.isError(e.error)){var n="window.onerror@"+t.url+":"+e.lineNumber+":"+(e.columnNumber||0);e.error=new Error(e.message),e.error.stack=n}this.trackException({exception:e.error,severityLevel:Lt.Error},t)}}catch(t){var i=e.error?e.error.name+", "+e.error.message:"null";this.diagLog().throwInternal(m.CRITICAL,k,"_onError threw exception while logging error, error will not be collected: "+lt.getExceptionName(t),{exception:lt.dump(t),errorString:i})}},t.prototype.addTelemetryInitializer=function(e){this._telemetryInitializers.push(e)},t.prototype.initialize=function(n,i,r,o){var a=this;if(!this.isInitialized()){if(v.isNullOrUndefined(i))throw Error("Error initializing");e.prototype.initialize.call(this,n,i,r,o),this.setInitialized(!1);var c=this._getTelCtx(),u=this.identifier;this._globalconfig={instrumentationKey:n.instrumentationKey,endpointUrl:n.endpointUrl||"https://dc.services.visualstudio.com/v2/track"},this.config=c.getExtCfg(u);var l=t.getDefaultConfig();if(void 0!==l){for(var p in l)this.config[p]=c.getConfig(u,p,l[p]);if(this._globalconfig)for(var p in l)void 0===this._globalconfig[p]&&(this._globalconfig[p]=l[p])}this.config.isCookieUseDisabled&&lt.disableCookies(),this.config.isStorageUseDisabled&&lt.disableStorage();var f={instrumentationKey:function(){return n.instrumentationKey},accountId:function(){return a.config.accountId||n.accountId},sessionRenewalMs:function(){return a.config.sessionRenewalMs||n.sessionRenewalMs},sessionExpirationMs:function(){return a.config.sessionExpirationMs||n.sessionExpirationMs},sampleRate:function(){return a.config.samplingPercentage||n.samplingPercentage},cookieDomain:function(){return a.config.cookieDomain||n.cookieDomain},sdkExtension:function(){return a.config.sdkExtension||n.sdkExtension},isBrowserLinkTrackingEnabled:function(){return a.config.isBrowserLinkTrackingEnabled||n.isBrowserLinkTrackingEnabled},appId:function(){return a.config.appId||n.appId}};this._pageViewPerformanceManager=new ln(this.core),this._pageViewManager=new sn(this,this.config.overridePageViewDuration,this.core,this._pageViewPerformanceManager),this._pageVisitTimeManager=new cn(this.diagLog(),(function(e,t,n){return a.trackPageVisitTime(e,t,n)})),this._telemetryInitializers=this._telemetryInitializers||[],this._addDefaultTelemetryInitializers(f),this._eventTracking=new dn(this.diagLog(),"trackEvent"),this._eventTracking.action=function(e,t,n,i){i||(i={}),i.duration=n.toString(),a.trackEvent({name:e,properties:i})},this._pageTracking=new dn(this.diagLog(),"trackPageView"),this._pageTracking.action=function(e,t,n,i,r){v.isNullOrUndefined(i)&&(i={}),i.duration=n.toString();var o={name:e,uri:t,properties:i,measurements:r};a.sendPageViewInternal(o,i)};var d,h=Object(s.i)(),g=Object(s.d)(),m=Object(s.f)(),y=this;if(!1===this.config.disableExceptionTracking&&!this.config.autoExceptionInstrumented&&h){var x=h.onerror;h.onerror=function(e,t,n,i,r){var o=x&&x(e,t,n,i,r);return!0!==o&&y._onerror({message:e,url:t,lineNumber:n,columnNumber:i,error:r}),o},this.config.autoExceptionInstrumented=!0}if(!1===this.config.disableExceptionTracking&&!0===this.config.enableUnhandledPromiseRejectionTracking&&!this.config.autoUnhandledPromiseInstrumented&&h){var I=h.onunhandledrejection;h.onunhandledrejection=function(e){var t=I&&I.call(h,e);return!0!==t&&y._onerror({message:e.reason.toString(),error:e.reason instanceof Error?e.reason:new Error(e.reason.toString()),url:m?m.href:"",lineNumber:0,columnNumber:0}),t},this.config.autoUnhandledPromiseInstrumented=!0}if(!0===this.config.enableAutoRouteTracking&&g&&v.isFunction(g.pushState)&&v.isFunction(g.replaceState)&&h&&"undefined"!=typeof Event){var _=this;v.arrForEach(r,(function(e){e.identifier===Kt&&(a._properties=e)})),g.pushState=(d=g.pushState,function(){var e=d.apply(this,arguments);return pn(h,lt.createDomEvent(_.config.namePrefix+"pushState")),pn(h,lt.createDomEvent(_.config.namePrefix+"locationchange")),e}),g.replaceState=function(e){return function(){var t=e.apply(this,arguments);return pn(h,lt.createDomEvent(_.config.namePrefix+"replaceState")),pn(h,lt.createDomEvent(_.config.namePrefix+"locationchange")),t}}(g.replaceState),h.addEventListener&&(h.addEventListener(_.config.namePrefix+"popstate",(function(){pn(h,lt.createDomEvent(_.config.namePrefix+"locationchange"))})),h.addEventListener(_.config.namePrefix+"locationchange",(function(){_._properties&&_._properties.context&&_._properties.context.telemetryTrace&&(_._properties.context.telemetryTrace.traceID=lt.generateW3CId(),_._properties.context.telemetryTrace.name=m&&m.pathname||"_unknown_"),a._currUri?(a._prevUri=a._currUri,a._currUri=m&&m.href||""):a._currUri=m&&m.href||"",setTimeout(function(e){_.trackPageView({refUri:e,properties:{duration:0}})}.bind(a,a._prevUri),_.autoRoutePVDelay)})))}this.setInitialized(!0)}},t.prototype.trackPageVisitTime=function(e,t,n){var i={PageName:e,PageUrl:t};this.trackMetric({name:"PageVisitTime",average:n,max:n,min:n,sampleCount:1},i)},t.prototype._addDefaultTelemetryInitializers=function(e){if(!e.isBrowserLinkTrackingEnabled()){var t=["/browserLinkSignalR/","/__browserLink/"];this._addTelemetryInitializer((function(e){if(e.baseType===jt.dataType){var n=e.baseData;if(n)for(var i=0;i<t.length;i++)if(n.target&&n.target.indexOf(t[i])>=0)return!1}return!0}))}},t.prototype._addTelemetryInitializer=function(e){this._telemetryInitializers.push(e)},t.prototype._sendCORSException=function(e){var t={message:"Script error: The browser's same-origin policy prevents us from getting the details of this exception. Consider using the 'crossorigin' attribute.",url:e,lineNumber:0,columnNumber:0,error:void 0},n=Bt.create(t,Nt.dataType,Nt.envelopeType,this.diagLog(),{url:e});this.core.track(n)},t.Version="2.5.1",t}(ze),dn=function(){function e(e,t){this._name=t,this._events={},this._logger=e}return e.prototype.start=function(e){void 0!==this._events[e]&&this._logger.throwInternal(m.WARNING,be,"start was called more than once for this event without calling stop.",{name:this._name,key:e},!0),this._events[e]=+new Date},e.prototype.stop=function(e,t,n,i){var r=this._events[e];if(isNaN(r))this._logger.throwInternal(m.WARNING,Te,"stop was called without a corresponding start.",{name:this._name,key:e},!0);else{var o=+new Date,a=ht.GetDuration(r,o);this.action(e,t,a,n,i)}delete this._events[e],this._events[e]=void 0},e}(),hn=function(){function e(e){this._config=e,this._buffer=[]}return e.prototype.enqueue=function(e){this._buffer.push(e)},e.prototype.count=function(){return this._buffer.length},e.prototype.clear=function(){this._buffer.length=0},e.prototype.getItems=function(){return this._buffer.slice(0)},e.prototype.batchPayloads=function(e){return e&&e.length>0?this._config.emitLineDelimitedJson()?e.join("\n"):"["+e.join(",")+"]":null},e.prototype.markAsSent=function(e){this.clear()},e.prototype.clearSent=function(e){},e}(),gn=function(){function e(t,n){this._bufferFullMessageSent=!1,this._logger=t,this._config=n;var i=this.getBuffer(e.BUFFER_KEY),r=this.getBuffer(e.SENT_BUFFER_KEY);this._buffer=i.concat(r),this._buffer.length>e.MAX_BUFFER_SIZE&&(this._buffer.length=e.MAX_BUFFER_SIZE),this.setBuffer(e.SENT_BUFFER_KEY,[]),this.setBuffer(e.BUFFER_KEY,this._buffer)}return e.prototype.enqueue=function(t){this._buffer.length>=e.MAX_BUFFER_SIZE?this._bufferFullMessageSent||(this._logger.throwInternal(m.WARNING,we,"Maximum buffer size reached: "+this._buffer.length,!0),this._bufferFullMessageSent=!0):(this._buffer.push(t),this.setBuffer(e.BUFFER_KEY,this._buffer))},e.prototype.count=function(){return this._buffer.length},e.prototype.clear=function(){this._buffer.length=0,this.setBuffer(e.BUFFER_KEY,[]),this.setBuffer(e.SENT_BUFFER_KEY,[]),this._bufferFullMessageSent=!1},e.prototype.getItems=function(){return this._buffer.slice(0)},e.prototype.batchPayloads=function(e){return e&&e.length>0?this._config.emitLineDelimitedJson()?e.join("\n"):"["+e.join(",")+"]":null},e.prototype.markAsSent=function(t){this._buffer=this.removePayloadsFromBuffer(t,this._buffer),this.setBuffer(e.BUFFER_KEY,this._buffer);var n=this.getBuffer(e.SENT_BUFFER_KEY);n instanceof Array&&t instanceof Array&&((n=n.concat(t)).length>e.MAX_BUFFER_SIZE&&(this._logger.throwInternal(m.CRITICAL,we,"Sent buffer reached its maximum size: "+n.length,!0),n.length=e.MAX_BUFFER_SIZE),this.setBuffer(e.SENT_BUFFER_KEY,n))},e.prototype.clearSent=function(t){var n=this.getBuffer(e.SENT_BUFFER_KEY);n=this.removePayloadsFromBuffer(t,n),this.setBuffer(e.SENT_BUFFER_KEY,n)},e.prototype.removePayloadsFromBuffer=function(e,t){var n=[];for(var i in t){var r=!1;for(var o in e)if(e[o]===t[i]){r=!0;break}r||n.push(t[i])}return n},e.prototype.getBuffer=function(e){var t=e;try{t=this._config.namePrefix&&this._config.namePrefix()?this._config.namePrefix()+"_"+t:t;var n=lt.getSessionStorage(this._logger,t);if(n){var i=Object(s.e)().parse(n);if(i)return i}}catch(e){this._logger.throwInternal(m.CRITICAL,ae," storage key: "+t+", "+lt.getExceptionName(e),{exception:lt.dump(e)})}return[]},e.prototype.setBuffer=function(e,t){var n=e;try{n=this._config.namePrefix&&this._config.namePrefix()?this._config.namePrefix()+"_"+n:n;var i=JSON.stringify(t);lt.setSessionStorage(this._logger,n,i)}catch(e){lt.setSessionStorage(this._logger,n,JSON.stringify([])),this._logger.throwInternal(m.WARNING,oe," storage key: "+n+", "+lt.getExceptionName(e)+". Buffer cleared",{exception:lt.dump(e)})}},e.BUFFER_KEY="AI_buffer",e.SENT_BUFFER_KEY="AI_sentBuffer",e.MAX_BUFFER_SIZE=2e3,e}(),mn=function(){function e(){}return e.extractPropsAndMeasurements=function(e,t,n){if(!v.isNullOrUndefined(e))for(var i in e)if(e.hasOwnProperty(i)){var r=e[i];v.isNumber(r)?n[i]=r:v.isString(r)?t[i]=r:Object(s.k)()&&(t[i]=Object(s.e)().stringify(r))}},e.createEnvelope=function(t,n,i,r){var o=new Tt(t,r,n);i[mt]&&(o.sampleRate=i[mt]),o.iKey=i.iKey;var a=i.iKey.replace(/-/g,"");return o.name=o.name.replace("{0}",a),e.extractPartAExtensions(i,o),i.tags||(i.tags=[]),o},e.extractPartAExtensions=function(t,n){if(n.tags||(n.tags={}),t.ext||(t.ext={}),t.tags||(t.tags=[]),t.ext.user){t.ext.user.authId&&(n.tags[Wt.userAuthUserId]=t.ext.user.authId);var i=t.ext.user.id||t.ext.user.localId;i&&(n.tags[Wt.userId]=i)}if(t.ext.app&&t.ext.app.sesId&&(n.tags[Wt.sessionId]=t.ext.app.sesId),t.ext.device&&((t.ext.device.id||t.ext.device.localId)&&(n.tags[Wt.deviceId]=t.ext.device.id||t.ext.device.localId),t.ext.device.deviceClass&&(n.tags[Wt.deviceType]=t.ext.device.deviceClass),t.ext.device.ip&&(n.tags[Wt.deviceIp]=t.ext.device.ip)),t.ext.web){var r=t.ext.web;r.browserLang&&(n.tags[Wt.deviceLanguage]=r.browserLang),r.browserVer&&(n.tags[Wt.deviceBrowserVersion]=r.browserVer),r.browser&&(n.tags[Wt.deviceBrowser]=r.browser),n.data=n.data||{},n.data.baseData=n.data.baseData||{},n.data.baseData.properties=n.data.baseData.properties||{},r.domain&&(n.data.baseData.properties.domain=r.domain),r.isManual&&(n.data.baseData.properties.isManual=r.isManual.toString()),r.screenRes&&(n.data.baseData.properties.screenRes=r.screenRes),r.userConsent&&(n.data.baseData.properties.userConsent=r.userConsent.toString())}t.ext.device&&t.ext.device.model&&(n.tags[Wt.deviceModel]=t.ext.device.model),t.ext.os&&t.ext.os.name&&(n.tags[Wt.deviceOS]=t.ext.os.name),t.ext.device&&t.ext.device.deviceType&&(n.tags[Wt.deviceType]=t.ext.device.deviceType),t.ext.trace&&(t.ext.trace.parentID&&(n.tags[Wt.operationParentId]=t.ext.trace.parentID),t.ext.trace.name&&(n.tags[Wt.operationName]=t.ext.trace.name),t.ext.trace.traceID&&(n.tags[Wt.operationId]=t.ext.trace.traceID));for(var o={},s=function(e){var n=t.tags[e];v.arrForEach(v.objKeys(n),(function(e){o[e]=n[e]})),t.tags.splice(e,1)},c=t.tags.length-1;c>=0;c--)s(c);for(var u in t.tags)o[u]=t.tags[u];n.tags=a({},n.tags,o),n.tags[Wt.internalSdkVersion]||(n.tags[Wt.internalSdkVersion]="javascript:"+e.Version)},e.Version="2.5.1",e}(),vn=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.Create=function(e,t){this._logger=e,v.isNullOrUndefined(t.baseData)&&this._logger.throwInternal(m.CRITICAL,ue,"telemetryItem.baseData cannot be null.");var n=t.baseData.measurements||{},i=t.baseData.properties||{};mn.extractPropsAndMeasurements(t.data,i,n);var r=t.baseData;if(v.isNullOrUndefined(r))return e.warnToConsole("Invalid input for dependency data"),null;var o=r.id,a=r.target,s=r.name,c=r.duration,u=r.success,l=r.responseCode,p=r.type,f=r.correlationContext,d=r.properties&&r.properties[yt]?r.properties[yt]:"GET",h=new jt(e,o,a,s,c,u,l,d,p,f,i,n),g=new zt(jt.dataType,h);return mn.createEnvelope(e,jt.envelopeType,t,g)},t.DependencyEnvelopeCreator=new t,t}(mn),yn=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.Create=function(e,t){this._logger=e,v.isNullOrUndefined(t.baseData)&&this._logger.throwInternal(m.CRITICAL,ue,"telemetryItem.baseData cannot be null.");var n={},i={};t.baseType!==wt.dataType&&(n.baseTypeSource=t.baseType),t.baseType===wt.dataType?(n=t.baseData.properties||{},i=t.baseData.measurements||{}):t.baseData&&mn.extractPropsAndMeasurements(t.baseData,n,i),mn.extractPropsAndMeasurements(t.data,n,i);var r=t.baseData.name,o=new wt(e,r,n,i),a=new zt(wt.dataType,o);return mn.createEnvelope(e,wt.envelopeType,t,a)},t.EventEnvelopeCreator=new t,t}(mn),xn=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.Create=function(e,t){this._logger=e,v.isNullOrUndefined(t.baseData)&&this._logger.throwInternal(m.CRITICAL,ue,"telemetryItem.baseData cannot be null.");var n=t.baseData,i=Nt.CreateFromInterface(e,n),r=new zt(Nt.dataType,i);return mn.createEnvelope(e,Nt.envelopeType,t,r)},t.ExceptionEnvelopeCreator=new t,t}(mn),In=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.Create=function(e,t){this._logger=e,v.isNullOrUndefined(t.baseData)&&this._logger.throwInternal(m.CRITICAL,ue,"telemetryItem.baseData cannot be null.");var n=t.baseData.properties||{},i=t.baseData.measurements||{};mn.extractPropsAndMeasurements(t.data,n,i);var r=t.baseData.name,o=t.baseData.average,a=t.baseData.sampleCount,s=t.baseData.min,c=t.baseData.max,u=new Mt(e,r,o,a,s,c,n,i),l=new zt(Mt.dataType,u);return mn.createEnvelope(e,Mt.envelopeType,t,l)},t.MetricEnvelopeCreator=new t,t}(mn),_n=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.Create=function(e,t){var n;this._logger=e,v.isNullOrUndefined(t.baseData)&&this._logger.throwInternal(m.CRITICAL,ue,"telemetryItem.baseData cannot be null."),v.isNullOrUndefined(t.baseData)||v.isNullOrUndefined(t.baseData.properties)||v.isNullOrUndefined(t.baseData.properties.duration)?v.isNullOrUndefined(t.data)||v.isNullOrUndefined(t.data.duration)||(n=t.data.duration,delete t.data.duration):(n=t.baseData.properties.duration,delete t.baseData.properties.duration);var i,r=t.baseData;t.ext&&t.ext.trace&&t.ext.trace.traceID&&(i=t.ext.trace.traceID);var o=r.id||i,a=r.name,s=r.uri,c=r.properties||{},u=r.measurements||{};if(v.isNullOrUndefined(r.refUri)||(c.refUri=r.refUri),v.isNullOrUndefined(r.pageType)||(c.pageType=r.pageType),v.isNullOrUndefined(r.isLoggedIn)||(c.isLoggedIn=r.isLoggedIn.toString()),!v.isNullOrUndefined(r.properties)){var l=r.properties;for(var p in l)l.hasOwnProperty(p)&&(c[p]=l[p])}mn.extractPropsAndMeasurements(t.data,c,u);var f=new Ot(e,a,s,n,c,u,o),d=new zt(Ot.dataType,f);return mn.createEnvelope(e,Ot.envelopeType,t,d)},t.PageViewEnvelopeCreator=new t,t}(mn),bn=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.Create=function(e,t){this._logger=e,v.isNullOrUndefined(t.baseData)&&this._logger.throwInternal(m.CRITICAL,ue,"telemetryItem.baseData cannot be null.");var n=t.baseData,i=n.name,r=n.uri||n.url,o=n.properties||{},a=n.measurements||{};mn.extractPropsAndMeasurements(t.data,o,a);var s=new Ft(e,i,r,void 0,o,a,n),c=new zt(Ft.dataType,s);return mn.createEnvelope(e,Ft.envelopeType,t,c)},t.PageViewPerformanceEnvelopeCreator=new t,t}(mn),Tn=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.Create=function(e,t){this._logger=e,v.isNullOrUndefined(t.baseData)&&this._logger.throwInternal(m.CRITICAL,ue,"telemetryItem.baseData cannot be null.");var n=t.baseData.message,i=t.baseData.severityLevel,r=t.baseData.properties||{},o=t.baseData.measurements||{};mn.extractPropsAndMeasurements(t.data,r,o);var a=new qt(e,n,i,r,o),s=new zt(qt.dataType,a);return mn.createEnvelope(e,qt.envelopeType,t,s)},t.TraceEnvelopeCreator=new t,t}(mn),Sn=function(){function e(e){this._logger=e}return e.prototype.serialize=function(e){var t=this._serializeObject(e,"root");try{return Object(s.e)().stringify(t)}catch(e){this._logger.throwInternal(m.CRITICAL,pe,e&&v.isFunction(e.toString)?e.toString():"Error serializing object",null,!0)}},e.prototype._serializeObject=function(e,t){var n={};if(!e)return this._logger.throwInternal(m.CRITICAL,pe,"cannot serialize object because it is null or undefined",{name:t},!0),n;if(e.__aiCircularRefCheck)return this._logger.throwInternal(m.WARNING,de,"Circular reference detected while serializing object",{name:t},!0),n;if(!e.aiDataContract){if("measurements"===t)n=this._serializeStringMap(e,"number",t);else if("properties"===t)n=this._serializeStringMap(e,"string",t);else if("tags"===t)n=this._serializeStringMap(e,"string",t);else if(lt.isArray(e))n=this._serializeArray(e,t);else{this._logger.throwInternal(m.WARNING,fe,"Attempting to serialize an object which does not implement ISerializable",{name:t},!0);try{Object(s.e)().stringify(e),n=e}catch(e){this._logger.throwInternal(m.CRITICAL,pe,e&&v.isFunction(e.toString)?e.toString():"Error serializing object",null,!0)}}return n}for(var i in e.__aiCircularRefCheck=!0,e.aiDataContract){var r=e.aiDataContract[i],o=v.isFunction(r)?r()&Ye.Required:r&Ye.Required,a=v.isFunction(r)?r()&Ye.Hidden:r&Ye.Hidden,c=r&Ye.Array,u=void 0!==e[i],l=v.isObject(e[i])&&null!==e[i];if(!o||u||c){if(!a){var p=void 0;void 0!==(p=l?c?this._serializeArray(e[i],i):this._serializeObject(e[i],i):e[i])&&(n[i]=p)}}else this._logger.throwInternal(m.CRITICAL,V,"Missing required field specification. The field is required but not present on source",{field:i,name:t})}return delete e.__aiCircularRefCheck,n},e.prototype._serializeArray=function(e,t){var n;if(e)if(lt.isArray(e)){n=[];for(var i=0;i<e.length;i++){var r=e[i],o=this._serializeObject(r,t+"["+i+"]");n.push(o)}}else this._logger.throwInternal(m.CRITICAL,ge,"This field was specified as an array in the contract but the item is not an array.\r\n",{name:t},!0);return n},e.prototype._serializeStringMap=function(e,t,n){var i;if(e)for(var r in i={},e){var o=e[r];if("string"===t)void 0===o?i[r]="undefined":null===o?i[r]="null":o.toString?i[r]=o.toString():i[r]="invalid field: toString() is not defined.";else if("number"===t)if(void 0===o)i[r]="undefined";else if(null===o)i[r]="null";else{var a=parseFloat(o);isNaN(a)?i[r]="NaN":i[r]=a}else i[r]="invalid field: "+n+" is of unknown type.",this._logger.throwInternal(m.CRITICAL,i[r],null,!0)}return i},e}(),Cn=function(){function e(){this._onlineStatus=!0;var e=Object(s.i)(),t=Object(s.a)(),n=!1;try{if(e&&x.Attach(e,"online",this._setOnline.bind(this))&&(x.Attach(e,"offline",this._setOffline.bind(this)),n=!0),t){var i=t.body||t;v.isUndefined(i.ononline)||(i.ononline=this._setOnline.bind(this),i.onoffline=this._setOffline.bind(this),n=!0)}}catch(e){n=!1}this.isListening=n}return e.prototype.isOnline=function(){var e=Object(s.g)();return this.isListening?this._onlineStatus:!(e&&!v.isNullOrUndefined(e.onLine))||e.onLine},e.prototype.isOffline=function(){return!this.isOnline()},e.prototype._setOnline=function(){this._onlineStatus=!0},e.prototype._setOffline=function(){this._onlineStatus=!1},e.Offline=new e,e}().Offline,wn=function(){function e(){}return e.prototype.getHashCodeScore=function(t){return 100*(this.getHashCode(t)/e.INT_MAX_VALUE)},e.prototype.getHashCode=function(t){if(""===t)return 0;for(;t.length<e.MIN_INPUT_LENGTH;)t=t.concat(t);for(var n=5381,i=0;i<t.length;++i)n=(n<<5)+n+t.charCodeAt(i),n&=n;return Math.abs(n)},e.INT_MAX_VALUE=2147483647,e.MIN_INPUT_LENGTH=8,e}(),En=function(){function e(){this.hashCodeGeneragor=new wn,this.keys=new Vt}return e.prototype.getSamplingScore=function(e){return e.tags&&e.tags[this.keys.userId]?this.hashCodeGeneragor.getHashCodeScore(e.tags[this.keys.userId]):e.ext&&e.ext.user&&e.ext.user.id?this.hashCodeGeneragor.getHashCodeScore(e.ext.user.id):e.tags&&e.tags[this.keys.operationId]?this.hashCodeGeneragor.getHashCodeScore(e.tags[this.keys.operationId]):e.ext&&e.ext.telemetryTrace&&e.ext.telemetryTrace.traceID?this.hashCodeGeneragor.getHashCodeScore(e.ext.telemetryTrace.traceID):100*Math.random()},e}(),Dn=function(){function e(e,t){this.INT_MAX_VALUE=2147483647,this._logger=v.isNullOrUndefined(t)?new Pe:t,(e>100||e<0)&&(this._logger.throwInternal(m.WARNING,xe,"Sampling rate is out of range (0..100). Sampling will be disabled, you may be sending too much data which may affect your AI service level.",{samplingRate:e},!0),this.sampleRate=100),this.sampleRate=e,this.samplingScoreGenerator=new En}return e.prototype.isSampledIn=function(e){var t=this.sampleRate;return null==t||t>=100||(e.baseType===Mt.dataType||this.samplingScoreGenerator.getSamplingScore(e)<t)},e}(),Nn=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.priority=1001,t.identifier=Xt,t._XMLHttpRequestSupported=!1,t}return o(t,e),t.constructEnvelope=function(e,t,n){var i;switch((i=t===e.iKey||v.isNullOrUndefined(t)?e:a({},e,{iKey:t})).baseType){case wt.dataType:return yn.EventEnvelopeCreator.Create(n,i);case qt.dataType:return Tn.TraceEnvelopeCreator.Create(n,i);case Ot.dataType:return _n.PageViewEnvelopeCreator.Create(n,i);case Ft.dataType:return bn.PageViewPerformanceEnvelopeCreator.Create(n,i);case Nt.dataType:return xn.ExceptionEnvelopeCreator.Create(n,i);case Mt.dataType:return In.MetricEnvelopeCreator.Create(n,i);case jt.dataType:return vn.DependencyEnvelopeCreator.Create(n,i);default:return yn.EventEnvelopeCreator.Create(n,i)}},t._getDefaultAppInsightsChannelConfig=function(){return{endpointUrl:function(){return"https://dc.services.visualstudio.com/v2/track"},emitLineDelimitedJson:function(){return!1},maxBatchInterval:function(){return 15e3},maxBatchSizeInBytes:function(){return 102400},disableTelemetry:function(){return!1},enableSessionStorageBuffer:function(){return!0},isRetryDisabled:function(){return!1},isBeaconApiDisabled:function(){return!0},onunloadDisableBeacon:function(){return!1},instrumentationKey:function(){},namePrefix:function(){},samplingPercentage:function(){return 100}}},t._getEmptyAppInsightsChannelConfig=function(){return{endpointUrl:void 0,emitLineDelimitedJson:void 0,maxBatchInterval:void 0,maxBatchSizeInBytes:void 0,disableTelemetry:void 0,enableSessionStorageBuffer:void 0,isRetryDisabled:void 0,isBeaconApiDisabled:void 0,onunloadDisableBeacon:void 0,instrumentationKey:void 0,namePrefix:void 0,samplingPercentage:void 0}},t.prototype.pause=function(){throw new Error("Method not implemented.")},t.prototype.resume=function(){throw new Error("Method not implemented.")},t.prototype.flush=function(){try{this.triggerSend()}catch(e){this.diagLog().throwInternal(m.CRITICAL,z,"flush failed, telemetry will not be collected: "+lt.getExceptionName(e),{exception:lt.dump(e)})}},t.prototype.onunloadFlush=function(){if(!1!==this._senderConfig.onunloadDisableBeacon()&&!1!==this._senderConfig.isBeaconApiDisabled()||!lt.IsBeaconApiSupported())this.flush();else try{this.triggerSend(!0,this._beaconSender)}catch(e){this.diagLog().throwInternal(m.CRITICAL,F,"failed to flush with beacon sender on page unload, telemetry will not be collected: "+lt.getExceptionName(e),{exception:lt.dump(e)})}},t.prototype.teardown=function(){throw new Error("Method not implemented.")},t.prototype.initialize=function(n,i,r,o){e.prototype.initialize.call(this,n,i,r,o);var a=this._getTelCtx(),s=this.identifier;this._serializer=new Sn(i.logger),this._consecutiveErrors=0,this._retryAt=null,this._lastSend=0,this._sender=null;var c=t._getDefaultAppInsightsChannelConfig();this._senderConfig=t._getEmptyAppInsightsChannelConfig();var u=function(e){l._senderConfig[e]=function(){return a.getConfig(s,e,c[e]())}},l=this;for(var p in c)u(p);(this._buffer=this._senderConfig.enableSessionStorageBuffer&&lt.canUseSessionStorage()?new gn(this.diagLog(),this._senderConfig):new hn(this._senderConfig),this._sample=new Dn(this._senderConfig.samplingPercentage(),this.diagLog()),!this._senderConfig.isBeaconApiDisabled()&&lt.IsBeaconApiSupported())?this._sender=this._beaconSender:v.isUndefined(XMLHttpRequest)||("withCredentials"in new XMLHttpRequest?(this._sender=this._xhrSender,this._XMLHttpRequestSupported=!0):v.isUndefined(XDomainRequest)||(this._sender=this._xdrSender))},t.prototype.processTelemetry=function(e,n){n=this._getTelCtx(n);try{if(this._senderConfig.disableTelemetry())return;if(!e)return void n.diagLog().throwInternal(m.CRITICAL,E,"Cannot send empty telemetry");if(e.baseData&&!e.baseType)return void n.diagLog().throwInternal(m.CRITICAL,Ne,"Cannot send telemetry without baseData and baseType");if(e.baseType||(e.baseType="EventData"),!this._sender)return void n.diagLog().throwInternal(m.CRITICAL,K,"Sender was not initialized");if(!this._isSampledIn(e))return void n.diagLog().throwInternal(m.WARNING,Z,"Telemetry item was sampled out and not sent",{SampleRate:this._sample.sampleRate});e[mt]=this._sample.sampleRate;var i=t.constructEnvelope(e,this._senderConfig.instrumentationKey(),n.diagLog());if(!i)return void n.diagLog().throwInternal(m.CRITICAL,le,"Unable to create an AppInsights envelope");var r=!1;if(e.tags&&e.tags[vt]&&(v.arrForEach(e.tags[vt],(function(e){try{e&&!1===e(i)&&(r=!0,n.diagLog().warnToConsole("Telemetry processor check returns false"))}catch(e){n.diagLog().throwInternal(m.CRITICAL,Se,"One of telemetry initializers failed, telemetry item will not be sent: "+lt.getExceptionName(e),{exception:lt.dump(e)},!0)}})),delete e.tags[vt]),r)return;var o=this._serializer.serialize(i),a=this._buffer.getItems(),s=this._buffer.batchPayloads(a);s&&s.length+o.length>this._senderConfig.maxBatchSizeInBytes()&&this.triggerSend(),this._buffer.enqueue(o),this._setupTimer()}catch(e){n.diagLog().throwInternal(m.WARNING,R,"Failed adding telemetry to the sender's buffer, some telemetry will be lost: "+lt.getExceptionName(e),{exception:lt.dump(e)})}this.processNext(e,n)},t.prototype._xhrReadyStateChange=function(e,t,n){if(4===e.readyState){var i=null;if(this._appId||(i=this._parseResponse(e.responseText||e.response))&&i.appId&&(this._appId=i.appId),(e.status<200||e.status>=300)&&0!==e.status)!this._senderConfig.isRetryDisabled()&&this._isRetriable(e.status)?(this._resendPayload(t),this.diagLog().throwInternal(m.WARNING,re,". Response code "+e.status+". Will retry to send "+t.length+" items.")):this._onError(t,this._formatErrorMessageXhr(e));else if(Cn.isOffline()){if(!this._senderConfig.isRetryDisabled()){this._resendPayload(t,10),this.diagLog().throwInternal(m.WARNING,re,". Offline - Response Code: "+e.status+". Offline status: "+Cn.isOffline()+". Will retry to send "+t.length+" items.")}}else 206===e.status?(i||(i=this._parseResponse(e.responseText||e.response)),i&&!this._senderConfig.isRetryDisabled()?this._onPartialSuccess(t,i):this._onError(t,this._formatErrorMessageXhr(e))):(this._consecutiveErrors=0,this._onSuccess(t,n))}},t.prototype.triggerSend=function(e,t){void 0===e&&(e=!0);try{if(this._senderConfig.disableTelemetry())this._buffer.clear();else{if(this._buffer.count()>0){var n=this._buffer.getItems();t?t.call(this,n,e):this._sender(n,e)}this._lastSend=+new Date}clearTimeout(this._timeoutHandle),this._timeoutHandle=null,this._retryAt=null}catch(e){(!lt.getIEVersion()||lt.getIEVersion()>9)&&this.diagLog().throwInternal(m.CRITICAL,re,"Telemetry transmission failed, some telemetry will be lost: "+lt.getExceptionName(e),{exception:lt.dump(e)})}},t.prototype._onError=function(e,t,n){this.diagLog().throwInternal(m.WARNING,G,"Failed to send telemetry.",{message:t}),this._buffer.clearSent(e)},t.prototype._onPartialSuccess=function(e,t){for(var n=[],i=[],r=0,o=t.errors.reverse();r<o.length;r++){var a=o[r],s=e.splice(a.index,1)[0];this._isRetriable(a.statusCode)?i.push(s):n.push(s)}e.length>0&&this._onSuccess(e,t.itemsAccepted),n.length>0&&this._onError(n,this._formatErrorMessageXhr(null,["partial success",t.itemsAccepted,"of",t.itemsReceived].join(" "))),i.length>0&&(this._resendPayload(i),this.diagLog().throwInternal(m.WARNING,re,"Partial success. Delivered: "+e.length+", Failed: "+n.length+". Will retry to send "+i.length+" our of "+t.itemsReceived+" items"))},t.prototype._onSuccess=function(e,t){this._buffer.clearSent(e)},t.prototype._xdrOnLoad=function(e,t){if(!e||e.responseText+""!="200"&&""!==e.responseText){var n=this._parseResponse(e.responseText);n&&n.itemsReceived&&n.itemsReceived>n.itemsAccepted&&!this._senderConfig.isRetryDisabled()?this._onPartialSuccess(t,n):this._onError(t,this._formatErrorMessageXdr(e))}else this._consecutiveErrors=0,this._onSuccess(t,0)},t.prototype._isSampledIn=function(e){return this._sample.isSampledIn(e)},t.prototype._beaconSender=function(e,t){var n=this._senderConfig.endpointUrl(),i=this._buffer.batchPayloads(e),r=new Blob([i],{type:"text/plain;charset=UTF-8"});Object(s.g)().sendBeacon(n,r)?(this._buffer.markAsSent(e),this._onSuccess(e,e.length)):(this._xhrSender(e,!0),this.diagLog().throwInternal(m.WARNING,re,". Failed to send telemetry with Beacon API, retried with xhrSender."))},t.prototype._xhrSender=function(e,t){var n=this,i=new XMLHttpRequest;i[gt]=!0,i.open("POST",this._senderConfig.endpointUrl(),t),i.setRequestHeader("Content-type","application/json"),lt.isInternalApplicationInsightsEndpoint(this._senderConfig.endpointUrl())&&i.setRequestHeader(rt.sdkContextHeader,rt.sdkContextHeaderAppIdRequest),i.onreadystatechange=function(){return n._xhrReadyStateChange(i,e,e.length)},i.onerror=function(t){return n._onError(e,n._formatErrorMessageXhr(i),t)};var r=this._buffer.batchPayloads(e);i.send(r),this._buffer.markAsSent(e)},t.prototype._parseResponse=function(e){try{if(e&&""!==e){var t=Object(s.e)().parse(e);if(t&&t.itemsReceived&&t.itemsReceived>=t.itemsAccepted&&t.itemsReceived-t.itemsAccepted===t.errors.length)return t}}catch(t){this.diagLog().throwInternal(m.CRITICAL,se,"Cannot parse the response. "+lt.getExceptionName(t),{response:e})}return null},t.prototype._resendPayload=function(e,t){if(void 0===t&&(t=1),e&&0!==e.length){this._buffer.clearSent(e),this._consecutiveErrors++;for(var n=0,i=e;n<i.length;n++){var r=i[n];this._buffer.enqueue(r)}this._setRetryTime(t),this._setupTimer()}},t.prototype._setRetryTime=function(e){var t;if(this._consecutiveErrors<=1)t=10;else{var n=(Math.pow(2,this._consecutiveErrors)-1)/2,i=Math.floor(Math.random()*n*10)+1;i*=e,t=Math.max(Math.min(i,3600),10)}var r=Date.now()+1e3*t;this._retryAt=r},t.prototype._setupTimer=function(){var e=this;if(!this._timeoutHandle){var t=this._retryAt?Math.max(0,this._retryAt-Date.now()):0,n=Math.max(this._senderConfig.maxBatchInterval(),t);this._timeoutHandle=setTimeout((function(){e.triggerSend()}),n)}},t.prototype._isRetriable=function(e){return 408===e||429===e||500===e||503===e},t.prototype._formatErrorMessageXhr=function(e,t){return e?"XMLHttpRequest,Status:"+e.status+",Response:"+e.responseText||!1:t},t.prototype._xdrSender=function(e,t){var n=this,i=Object(s.i)(),r=new XDomainRequest;r.onload=function(){return n._xdrOnLoad(r,e)},r.onerror=function(t){return n._onError(e,n._formatErrorMessageXdr(r),t)};var o=i&&i.location&&i.location.protocol||"";if(0!==this._senderConfig.endpointUrl().lastIndexOf(o,0))return this.diagLog().throwInternal(m.WARNING,re,". Cannot send XDomain request. The endpoint URL protocol doesn't match the hosting page protocol."),void this._buffer.clear();var a=this._senderConfig.endpointUrl().replace(/^(https?:)/,"");r.open("POST",a);var c=this._buffer.batchPayloads(e);r.send(c),this._buffer.markAsSent(e)},t.prototype._formatErrorMessageXdr=function(e,t){return e?"XDomainRequest,Response:"+e.responseText||!1:t},t}(ze),An=function(){},kn=function(){function e(t,n){var i=this;v.isNullOrUndefined(n)?this._logger=new Pe:this._logger=n,t||(t={}),"function"!=typeof t.sessionExpirationMs&&(t.sessionExpirationMs=function(){return e.acquisitionSpan}),"function"!=typeof t.sessionRenewalMs&&(t.sessionRenewalMs=function(){return e.renewalSpan}),this.config=t,this._storageNamePrefix=function(){return i.config.namePrefix&&i.config.namePrefix()?e.cookieNameConst+i.config.namePrefix():e.cookieNameConst},this.automaticSession=new An}return e.prototype.update=function(){this.automaticSession.id||this.initializeAutomaticSession();var t=ht.Now(),n=0!==this.config.sessionExpirationMs()&&t-this.automaticSession.acquisitionDate>this.config.sessionExpirationMs(),i=0!==this.config.sessionExpirationMs()&&t-this.automaticSession.renewalDate>this.config.sessionRenewalMs();n||i?this.renew():(!this.cookieUpdatedTimestamp||t-this.cookieUpdatedTimestamp>e.cookieUpdateInterval)&&(this.automaticSession.renewalDate=t,this.setCookie(this.automaticSession.id,this.automaticSession.acquisitionDate,this.automaticSession.renewalDate))},e.prototype.backup=function(){this.setStorage(this.automaticSession.id,this.automaticSession.acquisitionDate,this.automaticSession.renewalDate)},e.prototype.initializeAutomaticSession=function(){var e=lt.getCookie(this._logger,this._storageNamePrefix());if(e&&"function"==typeof e.split)this.initializeAutomaticSessionWithData(e);else{var t=lt.getStorage(this._logger,this._storageNamePrefix());t&&this.initializeAutomaticSessionWithData(t)}this.automaticSession.id||this.renew()},e.prototype.initializeAutomaticSessionWithData=function(e){var t=e.split("|");t.length>0&&(this.automaticSession.id=t[0]);try{if(t.length>1){var n=+t[1];this.automaticSession.acquisitionDate=+new Date(n),this.automaticSession.acquisitionDate=this.automaticSession.acquisitionDate>0?this.automaticSession.acquisitionDate:0}if(t.length>2){var i=+t[2];this.automaticSession.renewalDate=+new Date(i),this.automaticSession.renewalDate=this.automaticSession.renewalDate>0?this.automaticSession.renewalDate:0}}catch(e){this._logger.throwInternal(m.CRITICAL,N,"Error parsing ai_session cookie, session will be reset: "+lt.getExceptionName(e),{exception:lt.dump(e)})}0===this.automaticSession.renewalDate&&this._logger.throwInternal(m.WARNING,W,"AI session renewal date is 0, session will be reset.")},e.prototype.renew=function(){var e=ht.Now();this.automaticSession.id=lt.newId(),this.automaticSession.acquisitionDate=e,this.automaticSession.renewalDate=e,this.setCookie(this.automaticSession.id,this.automaticSession.acquisitionDate,this.automaticSession.renewalDate),lt.canUseLocalStorage()||this._logger.throwInternal(m.WARNING,I,"Browser does not support local storage. Session durations will be inaccurate.")},e.prototype.setCookie=function(e,t,n){var i=t+this.config.sessionExpirationMs(),r=n+this.config.sessionRenewalMs(),o=new Date,a=[e,t,n];i<r?o.setTime(i):o.setTime(r);var s=this.config.cookieDomain?this.config.cookieDomain():null,c=0===this.config.sessionExpirationMs()?"0":o.toUTCString();lt.setCookie(this._logger,this._storageNamePrefix(),a.join("|")+";expires="+c,s),this.cookieUpdatedTimestamp=ht.Now()},e.prototype.setStorage=function(e,t,n){lt.setStorage(this._logger,this._storageNamePrefix(),[e,t,n].join("|"))},e.acquisitionSpan=864e5,e.renewalSpan=18e5,e.cookieUpdateInterval=6e4,e.cookieNameConst="ai_session",e}(),Rn=function(){},Ln=function(){this.id="browser",this.deviceClass="Browser"},Pn=function(e){this.sdkVersion=(e.sdkExtension&&e.sdkExtension()?e.sdkExtension()+"_":"")+"javascript:2.5.1"},Mn=function(){function e(t,n){this.isNewUser=!1,this._logger=n;var i=lt.getCookie(this._logger,e.userCookieName);if(i){this.isNewUser=!1;var r=i.split(e.cookieSeparator);r.length>0&&(this.id=r[0])}if(this.config=t,!this.id){this.id=lt.newId();var o=new Date,a=v.toISOString(o);this.accountAcquisitionDate=a,this.isNewUser=!0,o.setTime(o.getTime()+31536e6);var s=[this.id,a],c=this.config.cookieDomain?this.config.cookieDomain():void 0;lt.setCookie(this._logger,e.userCookieName,s.join(e.cookieSeparator)+";expires="+o.toUTCString(),c);var u=t.namePrefix&&t.namePrefix()?t.namePrefix()+"ai_session":"ai_session";lt.removeStorage(this._logger,u)}this.accountId=t.accountId?t.accountId():void 0;var l=lt.getCookie(this._logger,e.authUserCookieName);if(l){var p=(l=decodeURI(l)).split(e.cookieSeparator);p[0]&&(this.authenticatedId=p[0]),p.length>1&&p[1]&&(this.accountId=p[1])}}return e.prototype.setAuthenticatedUserContext=function(t,n,i){if(void 0===i&&(i=!1),!this.validateUserInput(t)||n&&!this.validateUserInput(n))this._logger.throwInternal(m.WARNING,Ie,"Setting auth user context failed. User auth/account id should be of type string, and not contain commas, semi-colons, equal signs, spaces, or vertical-bars.",!0);else{this.authenticatedId=t;var r=this.authenticatedId;n&&(this.accountId=n,r=[this.authenticatedId,this.accountId].join(e.cookieSeparator)),i&&lt.setCookie(this._logger,e.authUserCookieName,encodeURI(r),this.config.cookieDomain())}},e.prototype.clearAuthenticatedUserContext=function(){this.authenticatedId=null,this.accountId=null,lt.deleteCookie(this._logger,e.authUserCookieName)},e.prototype.validateUserInput=function(e){return!("string"!=typeof e||!e||e.match(/,|;|=| |\|/))},e.cookieSeparator="|",e.userCookieName="ai_user",e.authUserCookieName="ai_authUser",e}(),Un=function(){},On=function(e,t,n,i){this.traceID=e||lt.generateW3CId(),this.parentID=t,this.name=n;var r=Object(s.f)();!n&&r&&r.pathname&&(this.name=r.pathname),this.name=ot.sanitizeString(i,this.name)},jn=function(){function e(e,t){Object(s.l)()&&(this.sessionManager=new kn(t,e),this.application=new Rn,this.device=new Ln,this.internal=new Pn(t),this.location=new Un,this.user=new Mn(t,e),this.telemetryTrace=new On(void 0,void 0,void 0,e),this.session=new An),this.appId=function(){return null}}return e.prototype.applySessionContext=function(e,t){var n=this.session||this.sessionManager&&this.sessionManager.automaticSession;n&&"string"==typeof n.id&&(e.ext.app.sesId=n.id),this.session&&("string"==typeof this.session.id?e.ext.app.sesId=this.session.id:e.ext.app.sesId=this.sessionManager.automaticSession.id)},e.prototype.applyOperatingSystemContxt=function(e,t){this.os&&this.os.name&&(e.ext.os=this.os)},e.prototype.applyApplicationContext=function(e,t){this.application&&("string"==typeof this.application.ver&&(e.tags[Wt.applicationVersion]=this.application.ver),"string"==typeof this.application.build&&(e.tags[Wt.applicationBuild]=this.application.build))},e.prototype.applyDeviceContext=function(e,t){this.device&&("string"==typeof this.device.id&&(e.ext.device.localId=this.device.id),"string"==typeof this.device.ip&&(e.ext.device.ip=this.device.ip),"string"==typeof this.device.model&&(e.ext.device.model=this.device.model),"string"==typeof this.device.deviceClass&&(e.ext.device.deviceClass=this.device.deviceClass))},e.prototype.applyInternalContext=function(e,t){this.internal&&("string"==typeof this.internal.agentVersion&&(e.tags[Wt.internalAgentVersion]=this.internal.agentVersion),"string"==typeof this.internal.sdkVersion&&(e.tags[Wt.internalSdkVersion]=this.internal.sdkVersion))},e.prototype.applyLocationContext=function(e,t){this.location&&"string"==typeof this.location.ip&&(e.tags[Wt.locationIp]=this.location.ip)},e.prototype.applyOperationContext=function(e,t){if(this.telemetryTrace){var n=e.ext.trace||{traceID:void 0,parentID:void 0};"string"==typeof this.telemetryTrace.traceID&&(n.traceID=this.telemetryTrace.traceID),"string"==typeof this.telemetryTrace.name&&(n.name=this.telemetryTrace.name),"string"==typeof this.telemetryTrace.parentID&&(n.parentID=this.telemetryTrace.parentID),e.ext.trace=n}},e.prototype.applyWebContext=function(e,t){this.web&&(e.ext.web=e.ext.web||{},e.ext.web=this.web)},e.prototype.applyUserContext=function(e,t){if(this.user){if(e.tags||(e.tags=[]),"string"==typeof this.user.accountId){e.tags[Wt.userAccountId]=this.user.accountId}"string"==typeof this.user.id&&(e.ext.user.id=this.user.id),"string"==typeof this.user.authenticatedId&&(e.ext.user.authId=this.user.authenticatedId)}},e.prototype.cleanUp=function(e,t){e.ext[Gt.DeviceExt]&&0===v.objKeys(e.ext[Gt.DeviceExt]).length&&delete e.ext[Gt.DeviceExt],e.ext[Gt.UserExt]&&0===v.objKeys(e.ext[Gt.UserExt]).length&&delete e.ext[Gt.UserExt],e.ext[Gt.WebExt]&&0===v.objKeys(e.ext[Gt.WebExt]).length&&delete e.ext[Gt.WebExt],e.ext[Gt.OSExt]&&0===v.objKeys(e.ext[Gt.OSExt]).length&&delete e.ext[Gt.OSExt],e.ext[Gt.AppExt]&&0===v.objKeys(e.ext[Gt.AppExt]).length&&delete e.ext[Gt.AppExt],e.ext[Gt.TraceExt]&&0===v.objKeys(e.ext[Gt.TraceExt]).length&&delete e.ext[Gt.TraceExt]},e}(),qn=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.priority=110,t.identifier=Kt,t}return o(t,e),t.getDefaultConfig=function(){return{instrumentationKey:function(){},accountId:function(){return null},sessionRenewalMs:function(){return 18e5},samplingPercentage:function(){return 100},sessionExpirationMs:function(){return 864e5},cookieDomain:function(){return null},sdkExtension:function(){return null},isBrowserLinkTrackingEnabled:function(){return!1},appId:function(){return null},namePrefix:function(){}}},t.prototype.initialize=function(n,i,r,o){var a=this;e.prototype.initialize.call(this,n,i,r,o);var s=this._getTelCtx(),c=this.identifier,u=t.getDefaultConfig();this._extensionConfig=this._extensionConfig||t.getDefaultConfig();var l=function(e){p._extensionConfig[e]=function(){return s.getConfig(c,e,u[e]())}},p=this;for(var f in u)l(f);this.context=new jn(i.logger,this._extensionConfig),this._breezeChannel=lt.getExtension(r,Xt),this.context.appId=function(){return a._breezeChannel?a._breezeChannel._appId:null}},t.prototype.processTelemetry=function(e,t){if(v.isNullOrUndefined(e));else{if(t=this._getTelCtx(t),e.name===Ot.envelopeType&&t.diagLog().resetInternalMessageCount(),this.context.session&&"string"!=typeof this.context.session.id&&this.context.sessionManager.update(),this._processTelemetryInternal(e,t),this.context&&this.context.user&&this.context.user.isNewUser){this.context.user.isNewUser=!1;var n=new Le(ke,(Object(s.g)()||{}).userAgent||"");t.diagLog().logInternalMessage(m.CRITICAL,n)}this.processNext(e,t)}},t.prototype._processTelemetryInternal=function(e,t){e.tags||(e.tags=[]),e.ext||(e.ext={});var n=e.ext;n[Gt.DeviceExt]=n[Gt.DeviceExt]||{},n[Gt.WebExt]=n[Gt.WebExt]||{},n[Gt.UserExt]=n[Gt.UserExt]||{},n[Gt.OSExt]=n[Gt.OSExt]||{},n[Gt.AppExt]=n[Gt.AppExt]||{},n[Gt.TraceExt]=n[Gt.TraceExt]||{};var i=this.context;i.applySessionContext(e,t),i.applyApplicationContext(e,t),i.applyDeviceContext(e,t),i.applyOperationContext(e,t),i.applyUserContext(e,t),i.applyOperatingSystemContxt(e,t),i.applyWebContext(e,t),i.applyLocationContext(e,t),i.applyInternalContext(e,t),i.cleanUp(e,t)},t}(ze),Fn=["req","rsp","hkErr","fnErr"];function zn(e,t){if(e)for(var n=0;n<e.length&&!t(e[n],n);n++);}function Hn(e,t,n,i,r){r>=0&&r<=2&&zn(e,(function(e,o){var a=e.cbks,s=a[Fn[r]];if(s){t.ctx=function(){return i[o]=i[o]||{}};try{s.apply(t.inst,n)}catch(e){var c=t.err;try{var u=a[Fn[2]];u&&(t.err=e,u.apply(t.inst,n))}catch(e){}finally{t.err=c}}}}))}function Vn(e,t,n,i){if(void 0===i&&(i=!0),e&&t&&n){var r=function e(t,n,i){var r=null;return t&&(t.hasOwnProperty(n)?r=t:i&&(r=e(t[s.o],n,!1))),r}(e,t,i),o=r[t];if(typeof o===s.m){var a=o._aiHooks;if(!a){var c=(l=a={i:0,n:t,f:o,h:[]},function(){var e=this,t=arguments,n=l.h,i={name:l.n,inst:e,ctx:null},r=[],o=[i];zn(t,(function(e){o.push(e)})),Hn(n,i,o,r,0);var a=l.f;try{i.rslt=a.apply(e,t)}catch(e){throw i.err=e,Hn(n,i,o,r,3),e}return Hn(n,i,o,r,1),i.rslt});c._aiHooks=a,r[t]=c}var u={id:a.i,cbks:n,rm:function(){var e=this.id;zn(a.h,(function(t,n){if(t.id===e)return a.h.splice(n,1),1}))}};return a.i++,a.h.push(u),u}}var l;return null}
/*!
 * Application Insights JavaScript SDK - Dependencies Plugin, 2.5.1
 * Copyright (c) Microsoft and contributors. All rights reserved.
 */
var Bn=v.objKeys,Gn=v.arrForEach;function Wn(e,t,n){var i=0,r=e[t],o=e[n];return r&&o&&(i=ht.GetDuration(r,o)),i}function Kn(e,t,n,i,r){var o=0,a=Wn(n,i,r);return a&&(o=Xn(e,t,lt.msToTimeSpan(a))),o}function Xn(e,t,n){var i=0;e&&t&&n&&((e.ajaxPerf=e.ajaxPerf||{})[t]=n,i=1);return i}var Yn=function(){this.openDone=!1,this.setRequestHeaderDone=!1,this.sendDone=!1,this.abortDone=!1,this.stateChangeAttached=!1},Jn=function e(t,n,i){var r=i;this.perfMark=null,this.completed=!1,this.requestHeadersSize=null,this.requestHeaders=null,this.responseReceivingDuration=null,this.callbackDuration=null,this.ajaxTotalDuration=null,this.aborted=0,this.pageUrl=null,this.requestUrl=null,this.requestSize=0,this.method=null,this.status=null,this.requestSentTime=null,this.responseStartedTime=null,this.responseFinishedTime=null,this.callbackFinishedTime=null,this.endTime=null,this.xhrMonitoringState=new Yn,this.clientFailure=0,this.traceID=t,this.spanID=n,an(e,this,(function(e){e.getAbsoluteUrl=function(){return e.requestUrl?pt.getAbsoluteUrl(e.requestUrl):null},e.getPathName=function(){return e.requestUrl?ot.sanitizeUrl(r,pt.getCompleteUrl(e.method,e.requestUrl)):null},e.CreateTrackItem=function(t,n,i){if(e.ajaxTotalDuration=Math.round(1e3*ht.GetDuration(e.requestSentTime,e.responseFinishedTime))/1e3,e.ajaxTotalDuration<0)return null;var r,o=((r={id:"|"+e.traceID+"."+e.spanID,target:e.getAbsoluteUrl(),name:e.getPathName(),type:t,duration:e.ajaxTotalDuration,success:+e.status>=200&&+e.status<400,responseCode:+e.status,method:e.method}).properties={HttpMethod:e.method},r);if(function(e,t){var n=e.perfTiming,i=t.properties||{},r=0,o=v.isString,a="redirect",s=a+"Start",c=a="End";if(n){r|=Kn(i,a,n,s,c),r|=Kn(i,"domainLookup",n,"domainLookupStart","domainLookupEnd"),r|=Kn(i,"connect",n,"connectStart","connectEnd"),r|=Kn(i,"request",n,"requestStart","requestEnd"),r|=Kn(i,"response",n,"responseStart","responseEnd"),r|=Kn(i,"networkConnect",n,"startTime","connectEnd"),r|=Kn(i,"sentRequest",n,"requestStart","responseEnd");var u=n.duration;u||(u=Wn(n,"startTime","responseEnd")||0),r|=Xn(i,"duration",u),r|=Xn(i,"perfTotal",u);var l=n.serverTiming;if(l){var p={};Gn(l,(function(e,t){var n=function(e){var t=e,n=/([^\w\d_$])/g;return n.test(e)&&(t=e.replace(n,"_")),t}(e.name||""+t),i=p[n]||{};Gn(Bn(e),(function(t){var n=e[t];("name"!==t&&o(n)||v.isNumber(n))&&(i[t]&&(n=i[t]+";"+n),!n&&o(n)||(i[t]=n))})),p[n]=i})),r|=Xn(i,"serverTiming",p)}r|=Xn(i,"transferSize",n.transferSize),r|=Xn(i,"encodedBodySize",n.encodedBodySize),r|=Xn(i,"decodedBodySize",n.decodedBodySize)}else e.perfMark&&(r|=Xn(i,"missing",e.perfAttempts));r&&(t.properties=i)}(e,o),n&&Bn(e.requestHeaders).length>0&&(o.properties=o.properties||{},o.properties.requestHeaders=e.requestHeaders),i){var a=i();if(a){var s=a.correlationContext;if(s&&(o.correlationContext=s),a.headerMap&&Bn(a.headerMap).length>0&&(o.properties=o.properties||{},o.properties.responseHeaders=a.headerMap),e.status>=400){var c=a.type;o.properties=o.properties||{},""!==c&&"text"!==c||(o.properties.responseText=a.responseText?a.statusText+" - "+a.responseText:a.statusText),"json"===c&&(o.properties.responseText=a.response?a.statusText+" - "+JSON.stringify(a.response):a.statusText)}}}return o}}))},Qn=function(){function e(t,n){this.traceFlag=e.DEFAULT_TRACE_FLAG,this.version=e.DEFAULT_VERSION,t&&e.isValidTraceId(t)?this.traceId=t:this.traceId=lt.generateW3CId(),n&&e.isValidSpanId(n)?this.spanId=n:this.spanId=lt.generateW3CId().substr(0,16)}return e.isValidTraceId=function(e){return e.match(/^[0-9a-f]{32}$/)&&"00000000000000000000000000000000"!==e},e.isValidSpanId=function(e){return e.match(/^[0-9a-f]{16}$/)&&"0000000000000000"!==e},e.prototype.toString=function(){return this.version+"-"+this.traceId+"-"+this.spanId+"-"+this.traceFlag},e.DEFAULT_TRACE_FLAG="01",e.DEFAULT_VERSION="00",e}(),Zn=v.isNullOrUndefined,$n=v.arrForEach,ei=v.objKeys,ti=0;function ni(e){var t="";try{Zn(e)||Zn(e.ajaxData)||Zn(e.ajaxData.requestUrl)||(t+="(url: '"+e.ajaxData.requestUrl+"')")}catch(e){}return t}function ii(e,t,n,i,r){e.diagLog().throwInternal(m.CRITICAL,t,n,i,r)}function ri(e,t,n,i,r){e.diagLog().throwInternal(m.WARNING,t,n,i,r)}function oi(e,t,n){return function(i){ii(e,t,n,{ajaxDiagnosticsMessage:ni(i.inst),exception:lt.dump(i.err)})}}function ai(e,t){return e&&t?e.indexOf(t):-1}var si=function(e){function t(){var n=e.call(this)||this;n.identifier=t.identifier,n.priority=120;var i,r,o,a,c=Object(s.f)(),u=!1,l=!1,p=c&&c.host&&c.host.toLowerCase(),f=t.getEmptyConfig(),d=!1,h=0,g=!1,m=0,y=!1,I=[],_={};return an(t,n,(function(e,n){function c(e,t,n){I.push(function(e,t,n){return e?Vn(e[s.o],t,n,!1):null}(e,t,n))}function b(e,t,n){var i=!1,r=((v.isString(t)?t:(t||{}).url||"")||"").toLowerCase(),o=ai(r,"?"),a=ai(r,"#");return(-1===o||-1!==a&&a<o)&&(o=a),-1!==o&&(r=r.substring(0,o)),Zn(e)?Zn(t)||(i="object"==typeof t&&!0===t[gt]||!!n&&!0===n[gt]):i=!0===e[gt],i?_[r]||(_[r]=1):_[r]&&(i=!0),i}function T(e,t){var n=!0,i=l;return Zn(e)||(n=!0===t||!Zn(e.ajaxData)),i&&n}function S(t){try{var n=t.getAllResponseHeaders();if(null!==n)if(-1!==ai(n.toLowerCase(),rt.requestContextHeaderLowerCase)){var i=t.getResponseHeader(rt.requestContextHeader);return ft.getCorrelationContext(i)}}catch(n){ri(e,j,"Failed to get Request-Context correlation header as it may be not included in the response or not accessible.",{ajaxDiagnosticsMessage:ni(t),exception:lt.dump(n)})}}function C(e,t){if(t.requestUrl&&a&&g){var n=Object(s.h)();if(n&&v.isFunction(n.mark)){ti++;var i=a+e+"#"+ti;n.mark(i);var r=n.getEntriesByName(i);r&&1===r.length&&(t.perfMark=r[0])}}}function w(e,t,n,i){var r=t.perfMark,o=Object(s.h)(),a=f.maxAjaxPerfLookupAttempts,c=f.ajaxPerfLookupDelay,u=t.requestUrl,l=0;!function s(){try{if(o&&r){l++;for(var p=null,f=o.getEntries(),d=f.length-1;d>=0;d--){var h=f[d];if(h){if("resource"===h.entryType)h.initiatorType!==e||-1===ai(h.name,u)&&-1===ai(u,h.name)||(p=h);else if("mark"===h.entryType&&h.name===r.name){t.perfTiming=p;break}if(h.startTime<r.startTime-1e3)break}}}!r||t.perfTiming||l>=a||!1===t.async?(r&&v.isFunction(o.clearMarks)&&o.clearMarks(r.name),t.perfAttempts=l,n()):setTimeout(s,c)}catch(e){i(e)}}()}function E(t){var n="";try{Zn(t)||(n+="string"==typeof t?"(url: '"+t+"')":"(url: '"+t.url+"')")}catch(t){ii(e,M,"Failed to grab failed fetch diagnostics message",{exception:lt.dump(t)})}return n}function D(t,n,i,r,o,a){function s(t,n,r){var o=r||{};o.fetchDiagnosticsMessage=E(i),n&&(o.exception=lt.dump(n)),ri(e,t,"Failed to calculate the duration of the fetch call, monitoring data for this fetch call won't be sent.",o)}r&&(r.responseFinishedTime=ht.Now(),r.status=n,w("fetch",r,(function(){var t=r.CreateTrackItem("Fetch",d,o);t?e.trackDependencyDataInternal(t):s(P,null,{requestSentTime:r.requestSentTime,responseFinishedTime:r.responseFinishedTime})}),(function(e){s(j,e,null)})))}function N(t){if(t&&t.headers)try{var n=t.headers.get(rt.requestContextHeader);return ft.getCorrelationContext(n)}catch(n){ri(e,j,"Failed to get Request-Context correlation header as it may be not included in the response or not accessible.",{fetchDiagnosticsMessage:E(t),exception:lt.dump(n)})}}e.initialize=function(p,h,v,_){if(!e.isInitialized()){n.initialize(p,h,v,_);var E=e._getTelCtx(),A=t.getDefaultConfig();$n(ei(A),(function(e){f[e]=E.getConfig(t.identifier,e,A[e])}));var k=f.distributedTracingMode;if(d=f.enableRequestHeaderTracking,g=f.enableAjaxPerfTracking,m=f.maxAjaxCallsPerView,y=f.enableResponseHeaderTracking,o=k===Je.AI||k===Je.AI_AND_W3C,r=k===Je.AI_AND_W3C||k===Je.W3C,g){var R=p.instrumentationKey||"unkwn";a=R.length>5?"ai.ajxmn."+R.substring(R.length-5)+".":"ai.ajxmn."+R+"."}if(!1===f.disableAjaxTracking&&function(){var e=!1;if(typeof XMLHttpRequest!==s.p&&!Zn(XMLHttpRequest)){var t=XMLHttpRequest[s.o];e=!(Zn(t)||Zn(t.open)||Zn(t.send)||Zn(t.abort))}try{" a ".trim()}catch(t){e=!1}return e}()&&!l&&(c(XMLHttpRequest,"open",{req:function(t,n,r,o){var a=t.inst,s=a.ajaxData;b(a,r)||!T(a,!0)||s&&s.xhrMonitoringState.openDone||function(t,n,r,o){var a=i&&i.telemetryTrace&&i.telemetryTrace.traceID||lt.generateW3CId(),s=lt.generateW3CId().substr(0,16),c=new Jn(a,s,e.diagLog());c.method=n,c.requestUrl=r,c.xhrMonitoringState.openDone=!0,c.requestHeaders={},c.async=o,t.ajaxData=c,function(t){t.ajaxData.xhrMonitoringState.stateChangeAttached=x.Attach(t,"readystatechange",(function(){try{t&&4===t.readyState&&T(t)&&function(t){var n=t.ajaxData;function i(n,i){var r=i||{};r.ajaxDiagnosticsMessage=ni(t),n&&(r.exception=lt.dump(n)),ri(e,P,"Failed to calculate the duration of the ajax call, monitoring data for this ajax call won't be sent.",r)}n.responseFinishedTime=ht.Now(),n.status=t.status,w("xmlhttprequest",n,(function(){try{var r=n.CreateTrackItem("Ajax",d,(function(){var e={statusText:t.statusText,headerMap:null,correlationContext:S(t),type:t.responseType,responseText:t.responseText,response:t.response};if(y){var n=t.getAllResponseHeaders();if(n){var i=n.trim().split(/[\r\n]+/),r={};$n(i,(function(e){var t=e.split(": "),n=t.shift(),i=t.join(": ");r[n]=i})),e.headerMap=r}}return e}));r?e.trackDependencyDataInternal(r):i(null,{requestSentTime:n.requestSentTime,responseFinishedTime:n.responseFinishedTime})}finally{t.ajaxData=null}}),(function(e){i(e,null)}))}(t)}catch(i){var n=lt.dump(i);n&&-1!==ai(n.toLowerCase(),"c00c023f")||ii(e,U,"Failed to monitor XMLHttpRequest 'readystatechange' event handler, monitoring data for this ajax call may be incorrect.",{ajaxDiagnosticsMessage:ni(t),exception:n})}}))}(t)}(a,n,r,o)},hkErr:oi(e,M,"Failed to monitor XMLHttpRequest.open, monitoring data for this ajax call may be incorrect.")}),c(XMLHttpRequest,"send",{req:function(t,n){var i=t.inst,r=i.ajaxData;T(i)&&!r.xhrMonitoringState.sendDone&&(C("xhr",r),r.requestSentTime=ht.Now(),i=e.includeCorrelationHeaders(r,void 0,void 0,i),r.xhrMonitoringState.sendDone=!0)},hkErr:oi(e,O,"Failed to monitor XMLHttpRequest, monitoring data for this ajax call may be incorrect.")}),c(XMLHttpRequest,"abort",{req:function(e){var t=e.inst,n=t.ajaxData;T(t)&&!n.xhrMonitoringState.abortDone&&(n.aborted=1,n.xhrMonitoringState.abortDone=!0)},hkErr:oi(e,L,"Failed to monitor XMLHttpRequest.abort, monitoring data for this ajax call may be incorrect.")}),d&&c(XMLHttpRequest,"setRequestHeader",{req:function(e,t,n){var i=e.inst;T(i)&&(i.ajaxData.requestHeaders[t]=n)},hkErr:oi(e,Ae,"Failed to monitor XMLHttpRequest.setRequestHeader, monitoring data for this ajax call may be incorrect.")}),l=!0),function(){var t=(n=Object(s.b)(),!n||Zn(n.Request)||Zn(n.Request[s.o])||Zn(n.fetch)?null:n.fetch);var n;if(!t)return;var r=Object(s.b)();!1===f.disableFetchTracking?(I.push(Vn(r,"fetch",{req:function(t,n,r){var o;if(u&&!b(null,n,r)){var a=t.ctx();o=function(t,n){var r=i&&i.telemetryTrace&&i.telemetryTrace.traceID||lt.generateW3CId(),o=lt.generateW3CId().substr(0,16),a=new Jn(r,o,e.diagLog());a.requestSentTime=ht.Now(),t instanceof Request?a.requestUrl=t?t.url:"":a.requestUrl=t;var s="GET";n&&n.method?s=n.method:t&&t instanceof Request&&(s=t.method);a.method=s;var c={};n&&n.headers&&d&&(c=n.headers);return a.requestHeaders=c,C("fetch",a),a}(n,r),r=e.includeCorrelationHeaders(o,n,r),a.data=o}},rsp:function(e,t){var n=e.ctx().data;n&&(e.rslt=e.rslt.then((function(t){return D(e,(t||{}).status,t,n,(function(){var e={statusText:t.statusText,headerMap:null,correlationContext:N(t)};if(y){var n={};t.headers.forEach((function(e,t){n[t]=e})),e.headerMap=n}return e})),t})).catch((function(i){throw D(e,0,t,n,null,{error:i.message}),i})))},hkErr:oi(e,M,"Failed to monitor Window.fetch, monitoring data for this fetch call may be incorrect.")})),u=!0):t.polyfill&&I.push(Vn(r,"fetch",{req:function(e,t,n){b(null,t,n)}}))}(),v.length>0&&v){for(var j=void 0,q=0;!j&&q<v.length;)v[q]&&v[q].identifier===Kt&&(j=v[q]),q++;j&&(i=j.context)}}},e.teardown=function(){$n(I,(function(e){e.rm()})),I=[],u=!1,l=!1,e.setInitialized(!1)},e.trackDependencyData=function(t,n){e.trackDependencyDataInternal(t,n)},e.includeCorrelationHeaders=function(t,n,a,s){var c=e._currentWindowHost||p;if(n){if(ft.canIncludeCorrelationHeader(f,t.getAbsoluteUrl(),c)){if(a||(a={}),a.headers=new Headers(a.headers||n instanceof Request&&n.headers||{}),o){var u="|"+t.traceID+"."+t.spanID;a.headers.set(rt.requestIdHeader,u),d&&(t.requestHeaders[rt.requestIdHeader]=u)}if((h=f.appId||i&&i.appId())&&(a.headers.set(rt.requestContextHeader,rt.requestContextAppIdFormat+h),d&&(t.requestHeaders[rt.requestContextHeader]=rt.requestContextAppIdFormat+h)),r){var l=new Qn(t.traceID,t.spanID);a.headers.set(rt.traceParentHeader,l.toString()),d&&(t.requestHeaders[rt.traceParentHeader]=l.toString())}return a}return a}if(s){if(ft.canIncludeCorrelationHeader(f,t.getAbsoluteUrl(),c)){if(o){u="|"+t.traceID+"."+t.spanID;s.setRequestHeader(rt.requestIdHeader,u),d&&(t.requestHeaders[rt.requestIdHeader]=u)}var h;if((h=f.appId||i&&i.appId())&&(s.setRequestHeader(rt.requestContextHeader,rt.requestContextAppIdFormat+h),d&&(t.requestHeaders[rt.requestContextHeader]=rt.requestContextAppIdFormat+h)),r){l=new Qn(t.traceID,t.spanID);s.setRequestHeader(rt.traceParentHeader,l.toString()),d&&(t.requestHeaders[rt.traceParentHeader]=l.toString())}}return s}},e.trackDependencyDataInternal=function(t,n,i){if(-1===m||h<m){f.distributedTracingMode!==Je.W3C&&f.distributedTracingMode!==Je.AI_AND_W3C||"string"!=typeof t.id||"."===t.id[t.id.length-1]||(t.id+=".");var r=Bt.create(t,jt.dataType,jt.envelopeType,e.diagLog(),n,i);e.core.track(r)}else h===m&&ii(e,me,"Maximum ajax per page view limit reached, ajax monitoring is paused until the next trackPageView(). In order to increase the limit set the maxAjaxCallsPerView configuration parameter.",!0);++h}})),n}return o(t,e),t.getDefaultConfig=function(){return{maxAjaxCallsPerView:500,disableAjaxTracking:!1,disableFetchTracking:!0,disableCorrelationHeaders:!1,distributedTracingMode:Je.AI,correlationHeaderExcludedDomains:["*.blob.core.windows.net","*.blob.core.chinacloudapi.cn","*.blob.core.cloudapi.de","*.blob.core.usgovcloudapi.net"],correlationHeaderDomains:void 0,appId:void 0,enableCorsCorrelation:!1,enableRequestHeaderTracking:!1,enableResponseHeaderTracking:!1,enableAjaxErrorStatusText:!1,enableAjaxPerfTracking:!1,maxAjaxPerfLookupAttempts:3,ajaxPerfLookupDelay:25}},t.getEmptyConfig=function(){var e=this.getDefaultConfig();return $n(ei(e),(function(t){e[t]=void 0})),e},t.prototype.processTelemetry=function(e,t){this.processNext(e,t)},t.identifier="AjaxDependencyPlugin",t}(ze);
/*!
 * Application Insights JavaScript SDK - Web, 2.5.1
 * Copyright (c) Microsoft and contributors. All rights reserved.
 */const ci=new(function(){function e(e){e.queue=e.queue||[],e.version=e.version||2;var t=e.config||{};if(t.connectionString){var n=It.parse(t.connectionString),i=n.ingestionendpoint;t.endpointUrl=i?i+"/v2/track":t.endpointUrl,t.instrumentationKey=n.instrumentationkey||t.instrumentationKey}this.appInsights=new fn,this.properties=new qn,this.dependencies=new si,this.core=new it,this.snippet=e,this.config=t,this.getSKUDefaults()}return e.prototype.trackEvent=function(e,t){this.appInsights.trackEvent(e,t)},e.prototype.trackPageView=function(e){var t=e||{};this.appInsights.trackPageView(t)},e.prototype.trackPageViewPerformance=function(e){var t=e||{};this.appInsights.trackPageViewPerformance(t)},e.prototype.trackException=function(e){!e.exception&&e.error&&(e.exception=e.error),this.appInsights.trackException(e)},e.prototype._onerror=function(e){this.appInsights._onerror(e)},e.prototype.trackTrace=function(e,t){this.appInsights.trackTrace(e,t)},e.prototype.trackMetric=function(e,t){this.appInsights.trackMetric(e,t)},e.prototype.startTrackPage=function(e){this.appInsights.startTrackPage(e)},e.prototype.stopTrackPage=function(e,t,n,i){this.appInsights.stopTrackPage(e,t,n,i)},e.prototype.startTrackEvent=function(e){this.appInsights.startTrackEvent(e)},e.prototype.stopTrackEvent=function(e,t,n){this.appInsights.stopTrackEvent(e,t,n)},e.prototype.addTelemetryInitializer=function(e){return this.appInsights.addTelemetryInitializer(e)},e.prototype.setAuthenticatedUserContext=function(e,t,n){void 0===n&&(n=!1),this.properties.context.user.setAuthenticatedUserContext(e,t,n)},e.prototype.clearAuthenticatedUserContext=function(){this.properties.context.user.clearAuthenticatedUserContext()},e.prototype.trackDependencyData=function(e){this.dependencies.trackDependencyData(e)},e.prototype.flush=function(e){void 0===e&&(e=!0),v.arrForEach(this.core.getTransmissionControls(),(function(t){v.arrForEach(t,(function(t){t.flush(e)}))}))},e.prototype.onunloadFlush=function(e){void 0===e&&(e=!0),v.arrForEach(this.core.getTransmissionControls(),(function(t){v.arrForEach(t,(function(t){t.onunloadFlush?t.onunloadFlush():t.flush(e)}))}))},e.prototype.loadAppInsights=function(e){void 0===e&&(e=!1);if(e&&this.config.extensions&&this.config.extensions.length>0)throw new Error("Extensions not allowed in legacy mode");var t=[],n=new Nn;return t.push(n),t.push(this.properties),t.push(this.dependencies),t.push(this.appInsights),this.core.initialize(this.config,t),this.emptyQueue(),this.pollInternalLogs(),this.addHousekeepingBeforeUnload(this),this.context=this.properties.context,this},e.prototype.updateSnippetDefinitions=function(e){for(var t in this)v.isString(t)&&(e[t]=this[t])},e.prototype.emptyQueue=function(){try{if(lt.isArray(this.snippet.queue)){for(var e=this.snippet.queue.length,t=0;t<e;t++){(0,this.snippet.queue[t])()}this.snippet.queue=void 0,delete this.snippet.queue}}catch(e){e&&v.isFunction(e.toString)&&e.toString()}},e.prototype.pollInternalLogs=function(){this.core.pollInternalLogs()},e.prototype.addHousekeepingBeforeUnload=function(e){if(Object(s.l)()||Object(s.j)()){var t=function(){e.onunloadFlush(!1);var t=e.appInsights.core._extensions[Kt];t&&t.context&&t.context._sessionManager&&t.context._sessionManager.backup()};if(!e.appInsights.config.disableFlushOnBeforeUnload){var n=v.addEventHandler("beforeunload",t);(n=v.addEventHandler("pagehide",t)||n)||e.appInsights.core.logger.throwInternal(m.CRITICAL,q,"Could not add handler for beforeunload and pagehide")}e.appInsights.config.disableFlushOnUnload||v.addEventHandler("pagehide",t)}},e.prototype.getSKUDefaults=function(){this.config.diagnosticLogInterval=this.config.diagnosticLogInterval&&this.config.diagnosticLogInterval>0?this.config.diagnosticLogInterval:1e4},e}())({config:{instrumentationKey:"2430ac1c-7d16-480a-9a1d-08071e3da25a"}});ci.loadAppInsights(),ci.trackPageView()}]);
//# sourceMappingURL=main.js.map